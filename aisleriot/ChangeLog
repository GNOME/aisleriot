2007-12-03  Christian Persch  <chpe@gnome.org>

	* sol.c: Use #ifdef here.

2007-12-03  Christian Persch  <chpe@gnome.org>

	* board.c: (set_focus), (aisleriot_board_button_press): Fix
	signed/unsigned int confusion.

2007-12-03  Christian Persch  <chpe@gnome.org>

	* window.c: (select_game_cb), (game_exception_response_cb): "select"
	is already defined; use another identifier.
	Add a const correctness fix.

2007-12-03  Christian Persch  <chpe@gnome.org>

	* game.c: (scm_get_feature_word), (scm_get_timeout), (cscm_init),
	(aisleriot_game_new_game), (aisleriot_game_drag_valid): Use correct
	function decls.

2007-11-30  Christian Persch  <chpe@gnome.org>

        Based on a patch by Danny Varner  <danny.varner@intel.com>.

 	* aisleriot/Makefile.am:
 	* aisleriot/board.c:
 	* aisleriot/conf.c:
 	* aisleriot/sol.c:
 	* aisleriot/window.c:
 	* aisleriot/window.h: Add support for hildon.

2007-11-18  Christian Persch  <chpe@gnome.org>

	R docs/*: Removed obsolete directory.

2007-09-23  Christian Persch  <chpe@gnome.org>

	* conf.c: (aisleriot_conf_get_statistic): Fix the statistics also in
	the !HAVE_GNOME case. 

2007-09-22  Thomas H.P. Andersen  <phomes@gmail.com>

	* rules/spider.scm: add autoplay on double-click. Bug #474620.
	Patch by Vincent Povirk.

2007-09-10  Christian Persch  <chpe@gnome.org>

	* rules/spider.scm: Revert the spider options order change from bug
	#403961 since it breaks on upgrade.

2007-09-08  Christian Persch  <chpe@gnome.org>

	* conf.c: (aisleriot_conf_get_statistic): Don't leak in the error
	case.

2007-09-07  Christian Persch  <chpe@gnome.org>

	* conf.c: (load_statistics):
	* game.c: (aisleriot_game_set_paused): Fix timer suspend on window
	iconification; and fix the corrupted statistics on load.

2007-08-30  Christian Persch  <chpe@gnome.org>

	* game.c: (update_game_dealable): Remove stray debug spew.

2007-08-30  Christian Persch  <chpe@gnome.org>

	* window.c: (aisleriot_window_init): Set the short-label property on
	the Select game action, so the toolbar item doesn't have the ellipsis
	that's needed in the menu item. Bug #471551.

2007-08-27  Andreas Røsdal  <andreasr@gnome.org>

	* rules/napoleons_tomb.scm: Resolve bug #469363, fix translation
	of "Autoplay", adding a new string "Autoplay". Patch from Claude Paroz.   

2007-07-21  Christian Persch  <chpe@gnome.org>

	* window.c: Add credits for new "Anglo-American" card theme.

2007-07-21  Christian Persch  <chpe@gnome.org>

	* game.c: (cscmi_eval_installed_file),
	(aisleriot_game_error_quark), (aisleriot_game_load_game):
	* game.h:
	* window.c: (load_idle_cb): Fix error handling when failing to load
	the game file.

2007-06-26  Christian Persch  <chpe@gnome.org>

        * board.c:
        * sol.c:
        * window.c: Enable sound whenever gstreamer is available. Bug #451399.
    
2007-06-26  Andreas Røsdal  <andreasr@gnome.org>

	* conf.c:
	* conf.h:
	* aisleriot.schemas.in:
	* window.c:
	* board.c:
	* sol.c: Add sound support to Aisleriot.

2007-06-26  Andreas Røsdal  <andreasr@gnome.org>

	* help/C/napoleons_tomb.xml:
	* help/C/aisleriot.xml:
	* help/Makefile.am:
	* rules/napoleons_tomb.scm:
	* rules/Makefile.am: 
	* translatable_game_names.h: Add the new game Napoleon's Tomb,
	patch from Kimmo Karlsson <kimmo.karlsson@gmail.com>,
	with modifications from Vincent Povirk, in Bug #447991. 

2007-06-24  Christian Persch  <chpe@gnome.org>

        * board.c: Don't redraw the board on focus-in/out if we're not
        showing the focus anyway. Eliminates unnecessary and costly redraws
        when showing a dialogue.

2007-06-24  Christian Persch  <chpe@gnome.org>

        * board.c: Abort the click cycle if a slot changes during the
        operation. Fixes bug #449767.
        * game.c: Remove the delayed call timeout on finalize.

2007-06-18  Andreas Røsdal  <andreasr@gnome.org>

	* conf.c:
	* conf.h:
	* window.c:
	* game.c:
	* sol.c: Port Aisleriot to the new GamesConf API. Patch from
	Christian Persch in bug #448432. Also moves the window state
	and size persistence code to GamesConf, which will allow us to
	fix other games wrt. bug #434297.

2007-06-17  Andreas Røsdal  <andreasr@gnome.org>

	* window.c:
	* game.c:
	* board.c:
	* Makefile.am:
	* sol.c: Support for compiling Aisleriot with mingw32 (bug #448317).  

2007-06-07  Christian Persch  <chpe@gnome.org>

	* board.c: (aisleriot_board_realize): Only get the XFT settings on
	X11.

2007-06-07  Christian Persch  <chpe@gnome.org>

	* board.c: (aisleriot_board_button_press),
	(aisleriot_board_set_card_theme): Fix the click-to-move mode with
	games that don't implement the 'droppable' feature (e.g., Maze).

2007-06-06  Christian Persch  <chpe@gnome.org>

	* game.c: (scm2c_card): Don't use anonymous structs, since the solaris
	compiler chokes on them. Bug #444802.

2007-06-06  Christian Persch  <chpe@gnome.org>

	* README: Updated.

2007-06-04  Christian Persch  <chpe@gnome.org>

	* board.c: (slot_update_card_images), (cards_are_droppable),
	(find_drop_target), (highlight_drop_target),
	(game_type_changed_cb), (aisleriot_board_expose_event): Fix drawing
	artifacts from highlighting when the game doesn't support the
	droppable feature.

2007-06-04  Christian Persch  <chpe@gnome.org>

	* window.c: (aisleriot_window_init): Don't show the score box unless
	the game features doesn't set scores-disabled.

2007-06-04  Christian Persch  <chpe@gnome.org>

	* board.c: (game_type_changed_cb), (aisleriot_board_set_property):
	* game.c: (scm_get_feature_word), (scm_set_feature_word),
	(aisleriot_game_get_property), (aisleriot_game_class_init),
	(aisleriot_game_get_features):
	* game.h:
	* window.c: (game_type_changed_cb), (aisleriot_window_init): Always
	update the game features when changing the game type.

2007-06-01  Christian Persch  <chpe@gnome.org>

	Landed the AisleRiot refactoring from my GIT branch at
	http://www.gnome.org/~chpe/git/gnome-games.git/

	Overview of the changes:

	* Refactored code
	* Maemo port
	* GTK-only port
	* Improve SVG rendering time for supported themes
	  (right now only Bellot theme)
	* Support pre-rendered themes with one file per card per size per theme
	* Decrease memory used for theme caching by only caching the pixmaps or
	  pixbufs, not both
	* Reduced startup time
	* Improved antialiased card rendering quality
	* Reduced response times by only rendering the changes cards instead
	  of the whole board
	* New click-to-select mode adapted for use with stylus and fingers
	  on touchscreen devices

	Bugs fixed includes the following:
	* SVG card set takes too long to load (Bug #337080)
	* Add "Restart Game" to game-over dialogue. (Bug #386827)
	* Also highlight empty slots if dropping there is possible.
	  Adapted from a patch by Amnon Aaronsohn from bug #338466.
	* Abort the click if the mouse moved away from the clicked slot.
	  (See bug #329183).
	* Make Fullscreen menu item a check item, as per HIG. Bug #352084.
	* Pause the game timer while the window is iconified. Bug #347448.
	* Fixed drawing artifacts (very noticeable with the Ornamental theme
	  at high sizes)

	You can access the full changelog as ChangeLog.git,
	or use svn history.

2007-05-18  Andreas Røsdal  <andreasr@gnome.org>

	* menu.c: Hide "Cards" menu item if only one one card
	style is available. Closes bug #438079.

2007-04-25  Robert Ancell  <robert.ancell@gmail.com>

	* cscmi.c: Fix read-after-free (Bug #423459)

2007-03-20  Andreas Røsdal  <andreasr@gnome.org>

	* rules/spider.scm:
	* help/C/spider.xml: Change spider options order. Patch from  
	Christian Persch in bug #403961.

2007-03-20  Andreas Røsdal  <andreasr@gnome.org>

	* plait.scm: Prevent a crash when double clicking in Plait.
	The button-double-clicked didn't check if the source slot
	is empty before trying to remove a card from it.
	Patch from Vincent Povirk in bug #416255.

2007-03-20  Andreas Røsdal  <andreasr@gnome.org>

	* thirteen.scm: Correctly recognize a win condition in Thirteen,
	by changing a check of the length of waste-slot. Patch from 
	Vincent Povirk in bug #418045.

2007-02-22  Andreas Røsdal  <andreasr@gnome.org>

	* events.c: Correct a check for mouse button in event handler,
	so that mouse button number less than 1 and more than 3 are ignored.
	Patch from Christian Persch in Bug #408243.

2007-02-22  Andreas Røsdal  <andreasr@gnome.org>

	* rules/agnes.scm: Another fix to make Agnes winnable.
	Patch from Vincent Povirk in Bug #409519.

2007-02-22  Andreas Røsdal  <andreasr@gnome.org>

	* help/C/streets_and_alleys.xml:
	* help/fr/streets_and_alleys.xml: Fix help for "Streets and Alleys".
	Patch from Christian Persch in Bug #348355.

2007-02-11  Andreas Røsdal  <andreasr@gnome.org>

	* translatable_game_names.h: Regenerate to update this file.
	Patch from Christian Persch in Bug #405150.

2007-02-10  Andreas Røsdal  <andreasr@gnome.org>

	* statistics.c: 
	Fix bug #406267 with a patch from Christian Persch.
	Use the game filename as key, not the localised name. 
	This prevents game statistics from being lost when switching locale.

2007-02-10  Andreas Røsdal  <andreasr@gnome.org>

	* menu.c: Correct option callback signature. Patch from 
	Christian Persch in Bug #406268.

2007-01-28  Andreas Røsdal  <andreasr@gnome.org>

	* rules/cruel.scm:
	* rules/kings_audience.scm:
	* rules/spider.scm:
	* rules/klondike.scm:
	* rules/gaps.scm:
	* rules/osmosis.scm: Mark forgotten strings for translation,
	reported in Bug #401477.

2007-01-19  Andreas Røsdal  <andreasr@gnome.org>

	* rules/spiderette.scm:
	* rules/will_o_the_wisp.scm: Remove options from Spiderette and 
	Will O The Wisp, which became useless because of the previous
	commit. Patch from Vincent Povirk in Bug #398192.

2007-01-07  Andreas Røsdal  <andreasr@gnome.org>

	* rules/Makefile.am:
	* spider_one_suit.scm:
	* spider_two_suit.scm:
	* spider.scm: Integrate Spider shuffle variations into one game.
	Patch from Aaron Schlaegel in Bug #393709. 

2006-12-03  Andreas Røsdal  <andrearo@pvv.ntnu.no>

	* Rules: Remove Rules directory, because it will cause a naming conflict
	on case insensitive file systems. (Bug #381809) 

2006-11-04  Callum McKenzie  <callum@spooky-possum.org>

	* rules/triple_peaks.scm (button-double-clicked): 
	Make double-clicking work like a single click since click-to-move
	over-rides single-click. See bug #370122.

2006-10-28  Joe Marcus Clarke  <marcus@freebsd.org>

	* cscmi.c: Correct two user-after-free problems, reported in #363254.

2006-10-13  Nickolay V. Shmyrev  <nshmyrev@yandex.ru>

	* menu.c:
	* menu.h:
	* sol.c:
	* sol.h: Solves problems with non-ascii chars in key path.
	Closes Bug #359365.

2006-10-13  Sebastien Bacher  <seb@debian.org>

	* cscmi.c: Fix typo (Bug #360355).

2006-10-01  David Stahl  <othernerd@gmail.com>

	* aisleriot.schemas.in:
	* menu.c:
	* menu.h:
	* sol.c:
	* sol.h: Stores the last 5 games in a menu, patch in #323818. 

2006-09-29  Vincent Povirk  <madewokherd@gmail.com>

	* rules/aunt_mary.scm: Correctly display redeal counter, Bug #358014.

2006-09-25  Tom Tromey  <tromey@redhat.com>

	* sol.c (game_file_to_name): Remove unused '*', from Bug #347262.

2006-09-29  Andreas Røsdal  <andrearo@pvv.ntnu.no>

	* help/C/aunt_mary.xml:
	* help/fr/aunt_mary.xml: Fix a broken link in Aisleriot's 
	documentation. Patch by Felix Riemann in Bug #356269 .

2006-08-25  Callum McKenzie  <callum@spooky-possum.org>

	* rules/agnes.scm: Make Agnes winnable, patch in Bug #352499.  


2006-08-05  Callum McKenzie  <callum@spooky-possum.org>

	* sol.scm: Removed the old garbage-protection code. It leaked
	memory and wasn't actually targeting the right objects.

	* cscmi.h: 
	* cscmi.c: Make c2scm_card private to cscmi.c. Reverse order of
	c2scm_deck and scm2c_deck to be consistent with c2scm_card and
	scm2c_card. Make scm_get_slot use c2scm_deck rather than
	duplicating code. c2scm_deck is now the only user of c2scm_card.
	Explicitly protect the result of c2scm_deck when it is passed to a
	scheme function. This should fix bug #342038.
	
2006-07-23  Callum McKenzie  <callum@spooky-possum.org>

	* sol.scm (make-card): Redo the garbage-collection protection
	code. Drop the use of guardians since I think I was misusing them
	and use an auxiliary list of references instead.

2006-07-18  Jason Clinton <me@jasonclinton.com>

        * cscmi.c: Fix #347679 completely this time :)

2006-07-18  Jason Clinton <me@jasonclinton.com>

        * cscmi.c: Fix bug-buddy invocation with Andreas patch.
	Fixes bug #347679 

2006-07-07  Andreas Røsdal <andrearo@stud.ntnu.no>

        * menu.c: Fix logo displayed in about dialog, reported in bug #346914. 
	* sol.c: Fix window icon, as reported in bug #346909.
        Patch by me, bug reported by mclasen@redhat.com.

2006-06-15  Richard Hoelscher  <rah@rahga.com>

	* BUGS: Deleted obsolete file.
	* get_titles.pl: Nonessential replacement of periphrastic perl.

2006-06-03  Callum McKenzie  <callum@spooky-possum.org>

	* sol.scm: Give the card-guardian while loop something to chew
	on. An empty body seems to cause a crash.

2006-05-21  Callum McKenzie  <callum@spooky-possum.org>

	* sol.scm: Explicitly protect the cards from garbage
	collection. We pull the cards into lists on the C side that guile
	doesn't know about and occaisionally the GC bites us. Doing
	everything on the scheme side might be better, but not today. See
	bug #342038.

2006-05-18  Callum McKenzie  <callum@spooky-possum.org>

	* rules/klondike.scm: Remvoe unlimited redeals, it isn't
	significantly easier than the normal two-redeal limit.
	Rework search-foundation as an or-map.

	* menu.c: Make the mutually-exclusive options load properly.

2006-05-17  Callum McKenzie  <callum@spooky-possum.org>

	* rules/klondike.scm: Add the unlimited redeals and no redeals
	options from Zach Keene.

	* menu.c: Fixes to the radio group code now I have a proper radio
	group to play with. 

2006-05-13  Callum McKenzie  <callum@spooky-possum.org>

	* events.c: Make mouse movement off a card that can't be dragged
	cancel the click on that card. See bug #329183. Also set the
	cursor correctly so it stays grasped if you move around the card
	during a click.

2006-05-12  Callum McKenzie  <callum@spooky-possum.org>

	* menu.c: Implement radio buttons in the game-specific menu.

	* rules/klondike.scm : Temporary example code for the
	radio-buttons.
	
	* dialog.c: Remove the old options-dialog code.

2006-04-28  Amnon Aaronsohn  <bla@cs.huji.ac.il>

	* cscmi.c:
	* cscmi.h:
	* events.c:
	* press_data.c:
	* slot.c:
	* slot.h:
	* sol.c: Another cleanup patch. See bug #338386 for details 
	and commentary.

2006-05-11  Callum McKenzie  <callum@spooky-possum.org>

	* cscmi.c: Recognise end-of-game situations when auto-move
	animation is in progress. Change deprecated scm_protect_object to
	scm_gc_protect_object. Change the return value of delayed-call to
	#t to ensure the double-click logic thinks something has happened.

2006-05-09  Callum McKenzie  <callum@spooky-possum.org>

	* dialog.c: Patch from chpe to make sure the games list is sorted
	regardless of translations. See bug #340271.

2006-05-06  Callum McKenzie  <callum@spooky-possum.org>

	* menu.h: 
	* menu.c: Patch from chpe to display the help on the same screen
	as the application. Bug #340272.

2006-05-04  Callum McKenzie  <callum@spooky-possum.org>

	* rules/union_square.scm (autoplay-foundations): 
	* rules/saratoga.scm (autoplay-foundations): 
	* rules/jumbo.scm (autoplay-foundations): 
	* rules/gypsy.scm (autoplay-foundations): 
	* rules/athena.scm (autoplay-foundations): 
	* rules/agnes.scm (autoplay-foundations): 
	* rules/klondike.scm (autoplay-foundations): 
	* rules/freecell.scm (move-low-cards): Use delayed-call.

	* cscmi.c: Add a delayed-call function so scheme code can animate
	auto-moves by delaying parts of the recursion. See bug #338453.

2006-05-02  Callum McKenzie  <callum@spooky-possum.org>

	* rules/freecell.scm: Remove some unused option variables.

2006-04-29  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c (create_sol_board): Patch from Amnon Aaronsohn to disable
	double-buffering since we do our own. Bug #338699.

2006-04-21  Callum McKenzie  <callum@spooky-possum.org>

	* card.c:
	* card.h:
	* cscmi.c:
	* cscmi.h:
	* draw.c:
	* events.c:
	* menu.c:
	* menu.h:
	* press_data.c:
	* slot.c:
	* slot.h:
	* sol.c:
	* sol.h: Patch from Amnon Aaronsohn to cleanup many minor aspects 
	of the code. Minor fixes from myself. See bug #338386 for details 
	and commentary.

2006-04-14  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c: Replace the explicit theme gconf key with a symbolic
	version.

2006-04-13  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c (retrieve_state): Fix the default card images to be
	something that exists.

2006-04-06  Thomas Andersen  <phomes@gmail.com>

	* menu.c: Update About dialog

2006-04-04  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c: Patch from Przemys©aw Grzegorczyk to unref
	the GnomeProgram in all main loops.

2006-04-02  Callum McKenzie  <callum@spooky-possum.org>

	* menu.c: 
	* sol.c: 
	* sol.desktop.in:
	* freecell.desktop.in:
	* Makefile.am: Update the icon handling to use icon themes. Rename
	gnome-cardgame.png to gnome-freecell.png.

2006-03-28  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c (main): Patch from Thomas Thurman to upgrade popt to
	GOption. Minor fixes as suggested by Paolo Borelli. Converted
	gnome_window_icon_... to gtk_window_set_default... .
	
2006-03-19  Callum McKenzie  <callum@spooky-possum.org>

	* rules/freecell.scm: Make the "game unsolvable" hint message
	useful and something resembling a proper sentence. Similarly for
	the "no moves" message.

2006-03-14  Callum McKenzie  <callum@spooky-possum.org>

	* rules/seahaven.scm: Double-click on foundations = auto-play.

2006-03-04  Callum McKenzie  <callum@spooky-possum.org>

	* rules/freecell.scm: Revert the threaded-hints patch since the
	qthreads library used in guile 1.6 isn't portable and guile 1.8 is
	too new to depend upon. Also, bug #331966 suggests that it isn't
	stable. See
	https://launchpad.net/distros/ubuntu/+source/gnome-games/+bug/29690
	for a discussion of the issues.

2006-03-03  Callum McKenzie  <callum@spooky-possum.org>

	* rules/freecell.scm (button-double-clicked): Only move the cards
	to the freecells - there are cases where moving to the foundation
	is undesirable and it isn't undoable. All the obvious cases are
	handled by the auto=move code anyway so chances are the player
	wants to move them to the freecells. See bug #329973 for another
	argument.

2006-02-15  Callum McKenzie  <callum@spooky-possum.org>

	* events.c: Remove unused variables.

	* card.c: 
	* cscmi.c (add_slot): Use g_list_append properly, hence removing a
	warning and using less code.

2006-02-12  Callum McKenzie  <callum@spooky-possum.org>

	* events.c (drop_moving_cards): Remove the code that moved the
	window to the final destination. It works just fine without it and
	for some reason, probably related to the new card compression
	code, it wasn't going to the right place when a king was placed on
	an empty slot causing a flicker.

2006-02-11  Callum McKenzie  <callum@spooky-possum.org>

	* rules/yukon.scm (check-a-tableau): Recursive checks for
	secondary moves were terminating early producing cases like bug
	#330616. Removed the immbedded? flag since I don't think it is
	actually needed.

2006-02-09  Callum McKenzie  <callum@spooky-possum.org>

	* rules/kings_audience.scm: Patch from Zack Keene to fix a slight
	opportunity to cheat.

2006-02-06  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c:
	* menu.c: Make the result of game_name_to_file translatable. This
	should make sure that the game names are translated properly
	everywhere by doing the translation when the string is created.

2006-02-05  Callum McKenzie  <callum@spooky-possum.org>

	* rules/diamond_mine.scm (button-released): Patch from Vincent
	Povirk to fix bug #329393. The bug stopped complete stacks of 13
	cards being moved.

2006-01-25  Callum McKenzie  <callum@spooky-possum.org>

	* dialog.c: Moved the exclamation marks in the winning dialog to
	be more appropriate (see bug #324613).

2006-01-24  Callum McKenzie  <callum@spooky-possum.org>

	* rules/ten_across.scm: Fix DOS CR/LF line endings.

2006-01-17  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c (main_prog): Make sure user-defined accelerators are
	saved.

2006-01-16  Callum McKenzie  <callum@spooky-possum.org>

	* rules/Makefile.am: 
	* rules/aunt_mary.scm:
	* translatable_names.h: New game from Alan Horkan: Aunt Mary.

	* rules/golf.scm: A distilled version of Alan Horkan's cleanups
	from bug #325038. None of the support for Putt Putt though.

	* rules/osmosis.scm:
	* rules/peek.scm: Patch from Zach Keene to add three card deals
	and to make peek inherit from osmosis. Bug #32028.

2006-01-01  Callum McKenzie  <callum@spooky-possum.org>

	* rules/gaps.scm: Patch from Zach Keene to add an option to shuffle
	the gaps on a redeal.

2005-12-28  Callum McKenzie  <callum@spooky-possum.org>

	* events.c (button_press_event): Make the middle button a
	synthetic double-click. As suggested by sigge in bug #324614.

	* draw.c: Calculate the card list compression ratio directly
	rather than using the old iterative method. This is not only more
	efficient, but also means that long stacks of cards don't shorten
	up more than neighbouring uncompressed stacks. See bug #324611.

2005-12-21  Callum McKenzie  <callum@spooky-possum.org>

	* dialog.c (show_select_game_dialog): unref objects, don't free
	them. Bug #323931.

2005-12-14  Callum McKenzie  <callum@spooky-possum.org>

	* rules/athena.scm: 
	* rules/saratoga.scm: Add droppable support, allow double-clicking
	of the foundations and remove ^M line endings.

	* rules/Makefile.am: 
	* rules/saratoga.acm:
	* rules/athena.scm: Two new games from Alan Horkan: Saratoga and
	Athena. Also rerun get_title.pl to update the translatable names.

2005-12-12  Callum McKenzie  <callum@spooky-possum.org>

	* rules/kings_audience.scm:
	* rules/Makefile.am: New game from Zach Keene: King's Audience.

2005-12-03  Callum McKenzie  <callum@spooky-possum.org>

	* rules/agnes.scm: Remove the restriction on playing onto a base
	card in the tableau - it was confusing players (see bug
	#322986). Also do a append-string -> format fix.

	* menu.c: Add a keyboard short-cut for changing the game. I chose
	Ctrl-O in analogy to "Open".

	* rules/elevator.scm (droppable?): Add the droppable? function
	that appears to have never been added (despite the rest of the
	code for droppable? being inserted).

	* cscmi.c: Enhance the debugging code to return the stack trace as
	well.

2005-12-02  Callum McKenzie  <callum@spooky-possum.org>

	* cscmi.c (cscmi_write_exception_details): Update variables which
	have changed elsewhere. Declaring external variables here rather
	than relying on include files was very naughty of jrb.

	* sol.scm: Add a new function: get-nth-card.

	* rules/thirteen.scm: Change the way the waste is layed out after
	a suggestion by Rosanna in bug #322560. The top two cards are now
	in play as opposed to the end two. This simplifies the code
	somewhat and makes it look nicer.

2005-11-29  Callum McKenzie  <callum@spooky-possum.org>

	* rules/thirteen.scm (droppable?): Make sure we can't drop back
	down where we started. This stops the top two cards in the waste
	being eliminated (bug #322560).

2005-11-14  Callum McKenzie  <callum@spooky-possum.org>

	* events.c (button_press_event): Back out the hslot->length == 0
	test. It stops redeals working.

2005-11-07  Callum McKenzie  <callum@spooky-possum.org>

	* press_data.c:
	* events.c (button_press_event): Abort if the length of the cards
	we have is 0. I'm not sure why this happens, but it does happen.
	The FIXME comment has been moved from press_data.c to events.c
	(where the problem actually starts).
	
2005-10-30  Callum McKenzie  <callum@spooky-possum.org>

	* rules/spider.scm: 
	* rules/spider_one_suit.scm:
	* rules/spider_two_suit.scm:
	* rules/spiderette.scm:
	* rules/will_o_the_wisp.scm: Patch from Vincent Povirk to
	consolidate all the common code into spider.scm and to sub-class
	the other games from spider.

	* rules/Makefile.am:
	* rules/cruel.scm:
	* help/C/cruel.xml:
	* help/fr/cruel.xml: Add the game Cruel from Zach Keene.

2005-10-27  Callum McKenzie  <callum@spooky-possum.org>

	* rules/will_o_the_wisp.scm (check-for-discard): Patch from
	Zachary Keene to fix bugs #319804 and #319803. The first involved
	the hint ignoring piles that could be discarded, the second
	involved a card revealed by a discarded pile not being turned
	over.

2005-10-26  Callum McKenzie  <callum@spooky-possum.org>

	* menu.c: 
	* help/C/*.xml:
	* help/fr/*.xml: Replace spaces in the id attributes in the
	documentation with _. Also update the code to correctly reference
	them and consolidate the code for generating gconf keys since it
	uses the transformation. Fixes bug #319489.

2005-10-16  Callum McKenzie  <callum@spooky-possum.org>

	* rules/gaps.scm: Replace append-string with format to make the
	translators job easier (possible!). Bug #318938.

2005-10-11  Callum McKenzie  <callum@spooky-possum.org>

	* rules/spiderette.scm: Patch from Vincent Povirk to fix the
	issues with spiderette (bug #318339). This is mostly a
	cut-and-paste job from spider. I also made the check for a
	sequence of thirteen that can go to the foundation explicit.

2005-09-28  Callum McKenzie  <callum@spooky-possum.org>

	* rules/freecell.scm: Run the hint code in a thread whenever a
	game starts or a move is made. When the user hits the hint button
	a hint is ready and waiting for them (or, if the hint code hasn't
	finished running - a rare occurrence - the best available hint is
	returned).

2005-09-24  Callum McKenzie  <callum@spooky-possum.org>

	* rules/straight_up.scm: Make sure the check-reserve always
	updates the status message. We were missing the update when the
	reserve emptied. See bug #317069.

	* rules/kansas.scm (droppable?): Stop cards being moved to the
	reserve. See bug #316737.

2005-09-20  Callum McKenzie  <callum@spooky-possum.org>

	* menu.c: Change the game-specific help shortcut to <Shift>F1 to
	avoid a conflict with the hint short-cut. <Shift>F1 is the GNOME
	short-cut for context-sensitive help. See bug #316615.

2005-09-13  Callum McKenzie  <callum@spooky-possum.org>

	* sol.c: Fall back to the default if the requested variation file
	cannot be found and supply an explanatory dialog. See bug
	#316097. We still fail if the default cannot be found.

2005-09-09  Callum McKenzie  <callum@spooky-possum.org>

	* rules/block_ten.scm: Patch from Zachary Keene to support the
	"droppable?" hint.

	* translatable_names: Rerun get_titles.pl to add gaps to the
	list.

2005-09-08  Callum McKenzie  <callum@spooky-possum.org>

	* rules/gaps.scm
	* rules/Makefile.am
	* help/C/gaps.xml
	* help/C/aisleriot.xml
	* help/C/Makefile.am
	* help/fr/gaps.xml
	* help/fr/aisleriot.xml
	* help/fr/Makefile.am: Gaps: a new game from Zachary Keene.

	* sol.scm (save-variables): Make an explicit copy when saving
	state so we can restore things that are manipulated by set! style
	operations (i.e. the use of set-vector! in gaps).

2005-09-06  Callum McKenzie  <callum@spooky-possum.org>

	* sol.scm (restore-variables): Add an extra quote so lists are
	restored correctly.

2005-09-05  Callum McKenzie  <callum@spooky-possum.org>

	* rules/gypsy.scm (get-hint): Add a check in the hints for moving
	cards back down from the foundation. See bug #315258.

2005-08-22  Callum McKenzie  <callum@spooky-possum.org>

	* press_data.c:
	* press_data.h:
	* events.c: Fix the drawing hack for the case where multiple cards
	are being dragged. Extended the press_data structure with height
	and width data to assist this.

2005-08-21  Callum McKenzie  <callum@spooky-possum.org>

	* draw.c: 
	* sol.c:
	* events.c:
	* events.h: Change the drawing mechanism from "Set the background
	pixmap and let the X server sort it out" to an explicit expose
	function that draws from the surface pixmap. This is necessary to
	avoid a bad interaction between the initialisation of the drawing
	code and GTK+ 2.8.0. 

2005-08-19  Callum McKenzie  <callum@spooky-possum.org>

	* rules/freecell.scm: Patch from Dagfinn I. Mannsåker to make
	dragging to the freecells work again.

2005-08-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/*.scm: Be consistent about capitalising words like tableau
	and foundation in the hints (all lower case).

2005-08-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c (show_select_game_dialog): Remove an unused (but
	translated) string.

2005-07-31  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/klondike.scm (new-game): Add a little extra space at the
	bottom of the screen. This stops the fixed drawing code
	compressing the last column.

	* draw.c: Better card layout code. If the card spacing is more
	than half a card bring them together and place the excess on the
	outside edges. Also fix a bug with the in-slot spacing.

2005-07-28  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c: Fix the race condition reported in bug #121762 by making
	the end_of_game check in the timeout conditional on the game
	supporting a timeout condition. Currently none do, but if any did
	the game would have to be careful to allow no more moves or bug
	#121762 will reappear. Also removed the code that was patching the
	symptom rather than the cause.

	* cscmi.c (cscmi_timeout_lambda): Since it is called from C, make
	it return a C value (gboolean in this case).

2005-07-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c: Make the placement of cards even better by ignoring
	invalid slots we are mostly over in favour of valid slots we are
	only partially over.

2005-07-20  Dennis Cranston <dennis_cranston@yahoo.com>

	* aisleriot/dialog.c: Add a mnemonic to the new game button.

2005-07-20  Callum McKenzie  <callum@physics.otago.ac.nz>

	* slot.c: Minor cosmetic changes to the code.

	* events.c: Cleanups of the card-targeting code. Based on a patch
	from Peter Moulder.

2005-07-19  Callum McKenzie  <callum@physics.otago.ac.nz>

	* translatable_game_names.h: Run get_titles.pl to update it for
	the latest games.

2005-07-18  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c: Make sure menu.h is included.

	* Makefile.am: Optimisation and cleanup.

2005-07-17  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c: 
	* events.c:
	* menu.c:
	* menu.h: Make sure that the game options menu is only sensitive
	while a game is inactive. i.e. Don't change the rules mid-game.
	Fixes bug #309212.
	
2005-07-15  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/escalator.scm: 
	* rules/elevator.scm: Adapted to be sane in click-move-mode:
	single clicks do nothing in that mode (as opposed to doing
	something occasionally). Add hilight support.

	* cscmi.c (scm_click_to_move_p): Export the click-to-move boolean
	to scheme.

	* rules/block_ten.scm: Leave a note about other things that
	need to be fixed with this game.

	* rules/template.scm: Document set-features and droppable?

	* rules/agnes.scm:
	* rules/osmosis.scm:
	* rules/helsinki.scm:
	* rules/bakers_dozen.scm:
	* rules/bakers_game.scm:
	* rules/isabel.scm:
	* rules/beleaguered_castle.scm:
	* rules/bristol.scm:
	* rules/camelot.scm:
	* rules/golf.scm:
	* rules/jamestown.scm:
	* rules/kansas.scm:
	* rules/chessboard.scm:
	* rules/eight_off.scm:
	* rules/fortress.scm:
	* rules/fourteen.scm:
	* rules/gay_gordons.scm:
	* rules/king_albert.scm:
	* rules/labyrinth.scm:
	* rules/neighbor.scm:
	* rules/odessa.scm:
	* rules/scorpion.scm:
	* rules/streets_and_alleys.scm
	* rules/thirteen.scm
	* rules/zebra.scm: More highlighting patches from Vincet Povirk 
	(see bug #305609). 

	* TODO: Empty out now that we have finished the highlighting patches.
	
2005-07-14  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/Makefile.am: Add carpet and backbone to the build.

	* rules/backbone.scm:
	* rules/carpet.scm: Two new games from Vincent Povirk. Carpet is a
	no-brainer designed entirely to promote RSI. Backbone, however, is
	a bit more challenging.
	
	* rules/poker.scm: Patch from Vincent Povirk to implement a
	"shuffle" option where you can move cards but need more points
	to win.

2005-07-11  Richard Hoelscher  <rah@rahga.com>

	* menu.c: Make ui_description readonly.

2005-07-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/plait.scm (get-base-string):
	* rules/lady_jane.scm (get-base-string): 
	* rules/kansas.scm (get-base-string): 
	* rules/eagle_wing.scm (get-base-string): 
	* rules/chessboard.scm (get-base-string):
	* rules/canfield.scm (get-base-string): 
	* rules/agnes.scm (get-base-string): Make sure all versions of
	get-base-string return a string at all times to avoid a repeat of
	the glenwood bug Vincent fixed. This should fix #308186. Many of
	these shouldn't need it since the base card is always defined, 
	but it is good practise.

	* dialog.c: If the game-over dialog is closed, do something. If
	the game is won, start a new one, if the game isn't do an
	undo. This isn't the best solution (it would be nice to leave it
	in the game-over state and let the user decide) but many parts of
	the code don't handle the game-over state properly (e.g. hints).

	* rules/jumbo.scm: Patch from Vincent Povirk to provide autoplay.

2005-07-06  Richard Hoelscher  <rah@rahga.com>

	* rules/yield.scm: Fix a crasher when a card is picked up and placed
	back onto slot #2, added highlighting support. (#309557)

2005-06-24  Richard Hoelscher  <rah@rahga.com>

	* sol.c (eval_installed_file): Removed an obsolete bit of menu code.
	(main_prog): Remove statusbar resize grip to match other games.

2005-06-28  Callum McKenzie  <callum@physics.otago.ac.nz>

	* cscmi.c: Save the return value before freeing the call_data.

2005-06-14  Richard Hoelscher  <rah@rahga.com>

	* sol.scm: Add the "scores-disabled" feature. (#307710)
	* sol.[ch]: Implement hideable score display widgets.
	* cscmi.c (scm_set_feature_word): Support the score_is_hidden bool.
	* rules/plait.scm, ten_across.scm, valentine.scm: Help says these 
	games don't support scores, so now we hide the score.

2005-06-14  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/union_square.scm: Patch from Vincent Povirk to implement
	hilighting, double-click behaviour and to extend the slots so we
	can see what way we are going.

	* rules/gypsy.scm: Patch from Vincent Povirk to implement
	hilighting and decent double-click behaviour (plus minor fixes).

2005-06-11  Richard Hoelscher  <rah@rahga.com>

	* rules/: diamond_mine.scm, doublets.scm, eagle_wing.scm, yukon.scm,
	easthaven.scm, glenwood.scm, hopscotch.scm, lady_jane.scm, pileon.scm,
	sir_tommy.scm, spiderette.scm, treize.scm, westhaven.scm, plait.scm,
	will_o_the_wisp.scm, whitehead.scm : Highlighting support.
	
	Patches from Vincent Povirk <madewokherd@gmail.com>

2005-06-10  Richard Hoelscher  <rah@rahga.com>

	* rules/triple_peaks.scm: New game.
	* menu.c (compress_options_to_int): Reverse the way we compress
	options into bits, so that it will write out the same order
	we read them in. Only needed for games with multiple options.

2005-06-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* draw.c: Short-circuit the slot compression calculation if the
	cards would be too compressed to be usable. Fixes bug #306804.

2005-06-08  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/canfield.scm (button-pressed): Make sure we can only grab
	one card at a time from the stock. This bug is a result of
	spreading the three stock cards.

2005-06-07  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/klondike.scm: Patch from Vincent Povirk to auto-play cards
	when the foundation is double-clicked. Finally closing bug #2845.

	* sol.scm (flip-stock): Interpret a negative flip-limit as infinity.

	* rules/canfield.scm: Allow infinite redeals.

	* rules/klondike.scm: Allow infinite redeals in 3-card games.

2005-06-03  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c: Change Dennis' patch once more and just use the game name
	for the title. This also eliminates the make_title function.

2005-06-03  Dennis Cranston <dennis_cranston@yahoo.com>

	* dialog.c (show_hint_dialog):  Remove dialog title and
	use bold for primary message string.
	
	* sol.c (make_title):  Change window title to match 
	HIG suggested format.
	
2005-06-03  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am: Remove obsolete UCB_CFLAGS.

2005-06-02  Richard Hoelscher  <rah@rahga.com>

	* rules/treize.scm (button-released): Fix a crasher and treat the
	waste as if it was a single slot when it contains only 2 cards.

2005-06-02  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/seahaven.scm (droppable?): Add hilighting support for
	Seahaven.

	* sol.c (main_prog): Removed the default focus after too many
	complaints of "a cat on the keyboard ruined my solitaire game!".
	The use of any arrow key restores the focus to the toolbar.
	
2005-06-01  Richard Hoelscher  <rah@rahga.com>

	* rules, auld_lang_syne.scm, cover.scm, peek.scm, scuffle.scm, 
	spider.scm, spider_one_suit.scm, spider_two_suit.scm, straight_up.scm,
	quatorze.scm, ten_across.scm, thumb_and_pouch.scm, valentine.scm:
	Highlighting support.
	* TODO: We are using this file to track which games need highlighting.

	* canfield.scm, royal_east.scm, jumbo.scm, freecell.scm: Highlighting 
	amd a fix for Jumbo crasher (#304054) and Freecell doubleclicking
	(#171805) from Vincent Povirk <madewokherd@gmail.com>


2005-05-31  Richard Hoelscher  <rah@rahga.com>

	* sol.[ch]: 
	* cscmi.c:
	* menu.c: Switch from GnomeAppBar to GtkStatusBar, and use new
	games-stock support for menu tooltips in the statusbar.

2005-05-28  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (set_fullscreen_actions): Hide the menu bar in
	full-screen mode. I am tempted to also hide the status bar, but
	that gives essential info in klondike (the number of redeals
	remaining).

	* get_titles.pl (get_i18n_name_strings): 
	* sol.c (game_file_to_name): Capitalise all the words in the game
	names. This avoids "Monte carlo" while making life hell for 
	translators. Also told get_titles.pl about the new rules directory
	and simplified one of the regexps.

2005-05-26  Richard Hoelscher  <rah@rahga.com>

	* cscmi.c (scm_set_feature_word)(scm_get_feature_word)(scm_set_lambda) 
	* sol.scm (set-features)(reset-features): 
	Allow new functions to be added to set-lambda. If a feature is not
	supported by a game, then scm_set_lambda() won't try to implement it.
	* sol.[ch]: Add "enabled_features" global, which can be checked against
	feature masks, as well as convience gboolean "droppable_is_featured".

	* klondike.scm, thieves.scm, monte_carlo.scm, clock.scm, freecell.scm:
	* cscmi.c (cscmi_droppable_lambda): Support for "droppable?" queries,
	which can be used in highlighing and expanded drop targets.

	* events.c (cards_are_droppable): New, takes care of dirty work before
	calling cscmi_droppable_lambda().
	(highlight_drop_target): New, highlights the top card of a slot.
	* card.c (get_droptarget_pixmap): Find the topmost card of a given 
	slot, highlight it, and send back the pixmap.
	(set_card_size): Copy a card from the newly rendered deck which will
	be used as a destination pixbuf for highlighting, reset on resize.

	This closes out Bug #91595. Highlighting is based on card outlining 
	patch from Vincent Povirk <madewokherd@gmail.com> 

2005-05-03  Richard Hoelscher  <rah@rahga.com>

	* events.c (find_drop_target): Adjustments to distance calculation.
	* slot.c (slot_pressed): When determining if the point is within
	out rectangle, we now include the edges of our rectangle.

	* events.c (find_drop_target): Determine if the edges of the card are
	near a drop target, effectively making the targets bigger. (#91595)
	Patch from Vincent Povirk <madewokherd@gmail.com>

2005-04-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/gay_gordons.scm: Guarantee that the game is solvable. This
	was inspired by discussions and code from Jeff Barry. Also break
	out the pair-checking condition into its own function.

2005-04-13  Richard Hoelscher  <rah@rahga.com>

	* menu.c: Add "Leave Fullscreen" to toolbar.

2005-04-04  Richard Hoelscher  <rah@rahga.com>

	* menu.c (create_menus): Set sensitivity on actions rather than widgets
	for the toggle items.

2005-04-01  Richard Hoelscher  <rah@rahga.com>

	* menu.c (help_about_callback): Fix the accidental removal of a space
	from the about comment string.

2005-03-31  Richard Hoelscher  <rah@rahga.com>

	* menu.h: Minor cleanup.
	* menu.c: Use games-stock items. Switch to setting sensitivity on
	actions rather than widgets where possible.
	(help_about_callback): Use GtkAboutDialog rather than GnomeAbout
	(set_fullscreen_actions, fullscreen_callback) 
	(window_state_callback): Replace fullscreen_toggle_callback. This
	adds icons for entering and leaving fullscreen, and watches the
	state of the window for changes to and from fullscreen.
	(undo_set_sensitive, redo_set_sensitive): Action updates.
	(create_menus): Switch to actions, connect signal to window state cb.

2005-03-28  Callum McKenzie  <callum@physics.otago.ac.nz>

	* slot.c: 
	* slot.h:
	* events.c:
	* draw.c:
	* cscmi.c: Patch from emmanuel.touzery@wanadoo.fr (Emmanuel
	Touzery) to compress and decompress card stack heights so they fit
	in the available space.

2005-03-24  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: Patch from chpe@gnome.org (Christian Persch) to clean up
	the menu creation code.

	* statistics.glade: Fix up translatable tags.

2005-03-23  Dennis Cranston  <dennis_cranston@yahoo.com>
 
 	* gnome-scores-dialog.c: Make the scores dialog more HIG compliant.
 	
2005-03-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: Game options are saved using gconf and an automatically
	generated key. We also autogenerate a schema if needed.

	* statistics.c (load_statistics): Fix a memory leak when freeing
	the list read from gconf. Names which aren't storeed in the hash
	table are now freed.

2005-03-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (option_cb): Connect the game-specific menu to the scheme
	code. Still doesn't save the state between games.

2005-03-17  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (install_options_menu): The game-specific menu is now
	placed in the correct part of the menubar and is properly
	populated. Nothing is done with the data yet (and it certainly
	isn't saved across sessions, it is also a little slow when the
	game switches since it happens after the cards are rendered).

2005-03-16  Callum McKenzie  <callum@physics.otago.ac.nz>

	* cscmi.[ch]:
	* menu.c (install_options_menu): Only display the game-specific 
	options menu if there actually are game-specific options. Still 
	no actual options in the menu.

2005-03-15  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: Start work on a game-specific menu. Currently just makes
	the top-level menu and doesn't populate it.

	* sol.c:
	* dialog.c: Remove the old options_dialog code.

2005-03-08  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: Fullscreen mode from Paolo Borelli.

	* rules/clock.scm (button-pressed): Fix clicking a king in
	click-to-move mode. Fixing bugs in clock patience: only slightly
	less pointless than actually playing it.

	* sol.h:
	* sol.c:
	* dialog.c: Ensure the timer restarts after an undo from the end
	of game dialog.

	* events.c: Ensure game_in_progress is set properly when the end
	of game dialog appears. Bug #169462.

2005-02-10  Callum McKenzie  <callum@physics.otago.ac.nz>

        * rules/helsinki.scm
	* rules/neighbor.scm: Fix the button-pressed and button-clicked
	functions to return the correct values. This was affecting
	click-to-move, see bug #166815.

	* events.c: Fix double clicking under click-to-move mode so that
	we only drag valid sequences. This fixes bug #164638.

2005-02-01  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c (show_rules_options_dialog): Fix a call to
	gtk_dialog_add_buttons by adding a NULL. Of course the function it
	is in never gets called but this is still a good idea. Thanks to
	meissner@suse.de (bug #165903).

2005-01-24  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: Back out the menubar icon experiments.

2005-01-12  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/scorpion.scm: Simplify the game-over check and make
	correct-sequence check for card visibility. This has the effect of
	fixing bug #162917 where a flipped-over king was incorrectly
	assumed to be part of the a sequence.

2005-01-03  Richard Hoelscher  <rah@rahga.com>

	* card.c (get_preimage): Preimage API update, uri -> file.

2005-01-01  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: Swap the quit and new game buttons on the end of game
	dialog in an attempt to make the game more addictive.

2004-12-16  Callum McKenzie  <callum@physics.otago.ac.nz>

	* rules/will_o_the_wisp.scm (button-released): Don't flip the top
	of the stack if we haven't actually moved a card. Bug #160029.

	* rules/spider.scm: 
	* rules/spider_one_suit.scm:
	* rules/spider_two_suit.scm (game-won): Recognise an additional
	end-of-game condition where the cards are all stacked. See bug
	#159639 for a discussion (and credit, i.e. Jeff Bailey).

2004-12-13  Callum McKenzie  <callum@physics.otago.ac.nz>

	* card.c: gdk_pixbuf_render_pixmap_and_mask -> gdk_pixbuf_render_pixmap_and_mask_for_colormap.

Thu Dec  9 00:20:43 2004  Jonathan Blandford  <jrb@gnome.org>

	* rules/*scm: Move all the games into a subdir.

2004-12-01  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: Put the quit option back on the no more moves
	dialog. Hopefully Paolo will stop whining.

	* Makefile.am: Use the guile-supplied flag variables.

2004-11-30  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: 
	* menu.h:	
	* sol.c: Use the new GtkUIManager API for the menus. The code in
	menu.c is marginally cleaner, but the GUI code in sol.c is still a
	mess.
	(create_main_window): Delete the default action.

Tue Nov 30 02:23:51 2004  Jonathan Blandford  <jrb@redhat.com>

	* cscmi.c (cscmi_write_exception_details): add real information in
	the exception handling and launch bug-buddy.

2004-11-27  Callum McKenzie  <callum@physics.otago.ac.nz>

	* odessa.scm (check-game-over-foundation): Fix the end of game
	check. Fixes bug #159409.

	* events.c: 
	* dialog.c:	
	* menu.c: Change the end of game options to drop the quit option
	and add an undo option (for unsuccesful games).

Mon Nov 15 01:54:31 2004  Jonathan Blandford  <jrb@redhat.com>

	* cscmi.[ch]: Minor cleanups

Sat Nov 13 02:29:28 2004  Jonathan Blandford  <jrb@redhat.com>

	* cscmi.c: (add_slot), (make_card), (scm_gettext),
	(scm_undo_set_sensitive), (scm_redo_set_sensitive),
	(scm_set_statusbar_message), (scm_set_slot_y_expansion),
	(scm_set_slot_x_expansion), (scm_get_slot), (scm_set_cards),
	(scm_set_lambda), (scm_myrandom), (scm_get_score), (scm_set_score),
	(scm_add_to_score), (scm_set_timeout), (scm_get_timeout),
	(cscm_init):
	* cscmi.h:
	* dialog.c: (show_hint_dialog), (option_apply), (get_option_page),
	(show_rules_options_dialog):
	* events.c: (end_of_game_test), (drop_moving_cards),
	(button_press_event), (button_release_event):
	* menu.c: (undo_callback), (redo_callback):
	* press_data.c: (generate_press_data):
	* sol.c: (eval_installed_file), (new_game), (timer_cb),
	(main_prog), (main): Kill all gh_ calls in favor of scm_ calls in
	preparation for guile dropping all the gh_ calls.

	* cscmi.c: Replace all direct calls to the scheme lambdas with
	indirect calls that catch exceptions.  We don't do anything w/ the
	exceptions yet, but we no longer exit immediately.

2004-11-08  Richard Hoelscher  <rah@rahga.com>

	* card.c (set_card_size): replace scaling with preimage rendering
	(get_preimage): replace get_pixbuf(), support GamesPreimage
	* slot.svg, card.c (load_pixmaps): add SVG slots

2004-11-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* easthaven.scm (fill-empties): Fix up the hint function. Fixes
	bug #157426.

Fri Nov  5 04:03:33 2004  Jonathan Blandford  <jrb@redhat.com>

	* poker.scm (new-game): deal a card face up initially, and always
	flip a card

2004-10-13  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: Make the restart game controls insensitive at the
	beginning of the game.

	* sol.c:	
	* dialog.c: Remove the seed UI (we still need the actual seed so
	we can reset the game). Also cleaned up some code that was
	unnecessarily setting up the seed and fixed a bug that would have
	led to failed games being restarted indefinitely.

2004-10-07  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: Patch from jrb to fix a crasher with the find
	functionality in "Select a Game". See bug #154183.

2004-08-23  callum  <callum@spooky-possum.org>

	* events.c (button_press_event): Make sure that the size of the window
	is set properly for right-click reveals. Fixes bug #150796.

	* menu.c (help_update_game_name): 	
	* sol.c (game_file_to_name): Give an untranslated name to the menu
	so it is translated properly. Also use appropriate underscores in
	the gnome_app* calls so that it is hooked in properly. Fixes bug
	#148698. Also fix the menu hint so that it appears in the status bar.
	
	* sol.c (game_name_to_file): Make --variation accept file names as
	well as the english name. This is a sop to i18n by making the same
	cryptic code available to everyone.

2004-08-16  callum  <callum@spooky-possum.org>

	* card.c (get_card_picture): Added code to handle jokers. This
	caused thieves.scm to crash on startup.

	* elevator.scm (new-game): Also a layout problem (bug #150181).

	* eagle_wing.scm (new-game): Fix the layout to work with the
	scaling code. Bug #150179.

2004-07-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* pileon.scm (new-game): Fix pileon to use the new layout
	units. Fixes bug #148699.

2004-07-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* streets_and_alleys.scm (button-double-clicked): Fix logic in
	double click handling and prevent crashes (fixes bug #147996).

2004-07-06  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c:
	* draw.c: Remove dead code for high-lighting cards.

2004-07-02  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c: Implement changing cursors as per Paolo Borelli's
	suggestion in bug 145197. His patch was applied, but subsequently
	completely rewritten and made a lot more complicated. I also
	imported some good cursors from eog. Also fix a crasher when
	clicking on an empty slot.

2004-06-30  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c: Finish off click-to-move.

2004-06-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c: 
	* events.h:
	* menu.c: Continue work on the click-to-move code. Nearly there.

2004-06-28  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c: Add the click_to_move global variable.

	* aisleriot.schemas.in: 
	* menu.c: Reorganise the menus and add a click-to-move option. 
	Also add a gconf key for click-to-move and include myself in the
	credits.

2004-06-27  Callum McKenzie  <callum@physics.otago.ac.nz>

	* draw.c: Add code to high-light a card. This will be useful when
	we implement click-to-move.

	* Makefile.am:
	* card.c:
	* slot.png: Move the slot image from gdk-card-image to here. 
	Fixes bug #144890.

2004-06-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (redo_set_sensitive): Oops, off-by-one menu indexing for
	undo/redo. Bug #144781.

2004-06-15  Callum McKenzie  <callum@physics.otago.ac.nz>

	* freecell.scm: Add hint support. Written by Matthew V. Ball
	<mball@siliconashes.net> (see bug #134798).

2004-06-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c:
	* sol.h:
	* dialog.c: Delay scanning the games directory until we need to.
	Also replace the scan of filenames with a name->filename routine
	and a single lookup when selecting the variation on the command 
	line. Fixes bug #143331 the hard way.

Sat Jun  5 01:22:47 2004  Jonathan Blandford  <jrb@gnome.org>

	* odessa.scm (game-over): Fix a bug in odessa that has been
	bugging me for seven years.  Now the hint support will check for
	moves in the tableau before trying to move an ace to the
	foundation.

2004-05-25  Callum McKenzie  <callum@physics.otago.ac.nz>

	* cscmi.c: Fix compiler warnings.

2004-05-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* valentine.scm (button-clicked): Patch from
	tom@gentoo.kicks-ass.org to fix the case where there are no cards
	in the stock, but one on the waster. You can now redeal in that
	situation.

2004-05-07  Callum McKenzie  <callum@physics.otago.ac.nz>

	* escalator.scm: Fix-ups for the new drawing code and Zohar
	Kelrich's patch to fix and clean-up the overlap detection code.

2004-05-01  Callum McKenzie  <callum@physics.otago.ac.nz>

	* card.h: 
	* dialog.c: 
	* sol.h: 
	* card.c: Reimplement the theme selector using games_card_selector.

2004-04-28  Callum McKenzie  <callum@physics.otago.ac.nz>

	* translatable_game_names.h: 
	* Makefile.am:
	* spider_one_suit.scm:	
	* spider_two_suit.scm: Add one and two-suit versions of spider
	thanks to Aaron Schlaegel. See bug #69252.

2004-04-25  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: 
	* sol.c: 
	* card.c: 
	* card.h: 
	* sol.h: 
	* Makefile.am: Remove any reference to the gdk_card_image library
	and add a gconf key to select the card images.

	* aisleriot.schemas.in: Add a key for the card theme. Remove the
	old card_options key.

2004-04-23  Callum McKenzie  <callum@physics.otago.ac.nz>

	* plait.scm: Return false appropriately from the double-click
	routine so undo/redo works correctly. Change the
	"game-continuable" function to check the hint function. Make the
	hint function also understand moving cards from the stock to the
	tableau.

2004-04-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* plait.scm: Added double-click support from Dean Copsey. Bug
	#140682.

	* agnes.scm (strip): Fix the hint function. Thanks to Leonardo
	Boshell, as reported in bug #140781.

2004-04-20  Callum McKenzie  <callum@physics.otago.ac.nz>

	* card.c (set_card_size): Adjustments to follow the revised
	games-card-images API.

2004-04-19  Callum McKenzie  <callum@physics.otago.ac.nz>

	* plait.scm: Patch from Dean Copsey to fix a plait logic
	error. See bug #140234.

	* royal_east.scm (button-double-clicked): Apply fixes from Paolo,
	see Bug #138507.

2004-04-18  Callum McKenzie  <callum@physics.otago.ac.nz>

	* draw.c:
	* card.c:
	* sol.c: Use separate masks for the slots and the cards. 

2004-04-17  Callum McKenzie  <callum@physics.otago.ac.nz>

	* card.c: Add support for the new games-card-images routines. The
	routines don't draw anything aside from a white rectangle, but
	they do work in all other respects.

	* draw.c (CARD_HW_RATIO): Adjust the ratio to match a real card.
	(draw_card): Removed the rectangle I'd been using for debugging.

2004-04-15  Callum McKenzie  <callum@physics.otago.ac.nz>

	* golf.scm: Remove debuging code. See bug #140050.

2004-04-14  Callum McKenzie  <callum@physics.otago.ac.nz>

	* draw.c:	
	* sol.c:
	* sol.h:	
	* card.c: Make the empty slot image scale. Split the draw_gc into
	a clipping mask one and a background since the two operations are
	logically separate.

	
	* events.c: 
	* press_data.c:
	* card.c:
	* card.h:	
	* draw.h: Allow for the size of the card to change. Also position
	the cards so that "expanded slots" sit at one end of their
	allocated space. This makes sure that resizing the window reveals
	more cards if they extend off the end.

2004-04-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: Applied Paolo's double-click patch. Bug #139649.

	* sol.c: Tweak the card spacing so that suits are visible
	too. Fixes bug 80167.

	* events.c:
	* draw.c:
	* slot.h:	
	* slot.c: 
	* press_data.c:
	* draw.c: Add pixeldx and pixeldy to the slot structure to cache
	the pixel offsets. Also fixed the length calculation code to 
	be less reliant on past (and potentially wrong) calcualtions.
	
	* cscmi.c: 
	* sol.c:
	* sol.h:
	* slot.h: Make dx, dy resolution independent
	doubles rather than pixel-scaled ints.

	* ten_across.scm: Set the slot expansion in ten_across to be a
	real number (and a normalised to one) rather than a pixel
	height.

	* streets_and_alleys.scm (new-game): 
	* plait.scm (new-game): 
	* peek.scm (new-game): 
	* lady_jane.scm (new-game): 
	* king_albert.scm (new-game): 
	* thirteen.scm (new-game): 
	* yield.scm (new-game): 
	* treize.scm (new-game): Switch from pixel units to scaled units.

2004-04-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c:	
	* sol.c: Reorganise the configure events so that we deal with the
	window size and the playing area size separately. Treating them
	the same wasn't a very good idea.

	* beleaguered_castle.scm (new-game): 
	* bristol.scm (new-game): 
	* camelot.scm (new-game): 
	* eight_off.scm (new-game): 
	* kansas.scm (new-game): 
	* isabel.scm (new-game): 
	* freecell.scm (new-game): 
	* fourteen.scm (new-game): 
	* bakers_game.scm (new-game): Fix up to use the new co-ordinate system.

	* zebra.scm:
	* draw.c:
	* draw.h:
	* sol.c:	
	* cscmi.c: Make the slot co-ordinates real values. Test this on
	zebra.scm. This allows both the slot positions and the board size
	to be real values.
	
	* press_data.c: 
	* slot.c: 
	* slot.h:	
	* draw.c: Add a "pixelx" and "pixely" coordinate to the slot
	structure so that we can cache the real locations. This also
	allows all the clicking and dragging code to work with minimal
	modification. This is step 3 of the scaling code.

2004-04-08  Callum McKenzie  <callum@physics.otago.ac.nz>

	* draw.c: Fix the card locations up. Stage 2 is now complete.

2004-04-06  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.scm: 
	* cscmi.c: 
	* card.c:
	* card.h:
        * draw.c:
	* draw.h:
	* event.c: Step 2: Position the cards correctly (but with the wrong
	sizes). This involves a major reshuffling of geometry code. The 
	scheme position data is now in slots rather than pixels. The geometry 
	code has been dragged back into draw.c rather than card.c. Unused
	stuff has been dropped from cscmi.c.

	
	* aisleriot.schemas.in: 
	* sol.c:
	* events.c:
	* draw.c:
	* draw.h: Aisleriot scaling support step 1: Remember the size of
	the main window and don't change it with the game.

2004-03-31  Callum McKenzie  <callum@physics.otago.ac.nz>

	* royal_east.scm (button-double-clicked): Reworked Paolo's patch
	to remove the cut-and-paste "loop" and replace it with a recursive
	function.

2004-03-30  Paolo Borelli  <pborelli@katamail.com>

	* royal_east.scm: Implement double-clicking logic.

2004-03-19  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c:
	* menu.c: 
	* help/C/*.xml: (Re)implement a game-specific help menu item.

2004-03-15  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c: 
	* sol.h:
	* press_data.h:	
	* press_data.c: Rationalise all the press_data functions into
	press_data.c. Move the definition of press_data to press_data.h.
	events.c still does evil things to press_data though.

2004-02-24  Callum McKenzie  <callum@physics.otago.ac.nz>

	* statistics.glade: Mark the "do not translate this" messages as
	non-translatable.

2004-02-18  Callum McKenzie  <callum@physics.otago.ac.nz>

	* aisleriot.schemas.in: Fixed up the schema so it actualy installs.
	You need CVS intltool for this to work properly.

2004-02-14  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c: 	
	* dialog.c: Removed the set_has_separator commands from
	gtk_message_dialog widgets.

2004-02-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (help_about_callback): translator_credits ->
	translator-credits.

2004-02-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c (button_press_event): Allow for a drag on the second
	click of a double click. Fixes bug #133198.

2004-02-02  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c: Replaced references to g_basename. See bug
	#133176. Shouldn't affect anything really, it is in an #if 0 block
	of otherwise broken code.

2004-01-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (restart_game): Make sure restarts aren't counted by the
	statistics.

	* sol.c: Count games that we quit without finishing as failed.

2004-01-25  Callum McKenzie  <callum@physics.otago.ac.nz>

	* statistics.c: 
	* statistics.h:	
	* sol.c: Statistics are saved and even have a gconf-notification
	so that two games can be open at once. There is an obvious race
	condition, but you have to be playing two games at once and finish
	simultaneously, for a single user this is difficult (and if there are
	multiple users on one account then the statistics are meaningless).

	* aisleriot.schemas.in: Added a statistics entry to store the
	statistics.

	* sol.c:
	* sol.h:
	* events.c:
	* statistics.c:	
	* statistics.h: Statistics are now recorded, but not saved between
	games. The game timer now doesn't start until you press a mouse
	button. You can cheat by pre-planning all your moves, but that is
	your choice.

2004-01-24  Callum McKenzie  <callum@physics.otago.ac.nz>

	* statistics.c: We now have a mechanism for storing and displaying
	the statistics. We still need to actually update them and save
	them between games though.

2004-01-20  Callum McKenzie  <callum@physics.otago.ac.nz>

	* statistics.glade: Marked some strings as not-to-be-translated
	and removed markup where is is not necessary. I still haven't
	fixed the case where markup is necessary though.

2004-01-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* statistics.c: The selection of the game is now hooked in. Still
	no actual statistics to show.

	* statistics.glade: Improvements, including the addition of the
	game label. Should be good for UI review criticism now.

2004-01-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c:
	* Makefila.am:
	* statistics.glade:
	* statistics.h:	
	* statistics.c: Added a statistics dialog. This uses glade and so
	there are the accompanying build changes. The dialog doesn't do
	anything yet.

2004-01-02  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am: Remove splash.c, splash.h and splash.png from the
	distribution.

	* sol.c: Removed some old commented-out code, removed some
	deprecated code, removed the splash screen.

2003-12-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* seahaven.scm: Added the ability to move sequences of cards
	directly to the foundation rather than moving them one at a time.

2003-12-28  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: Double clicking in the select dialog now selects the
	game. Fixes bug #129442.

2003-11-26  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: 
	* menu.c: Edited the menu again, say goodbye to "preferences".

2003-11-24  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (create_menus): Rename settings to view.

2003-11-19  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am (CLEANFILES): Clean up schema files.

2003-11-19  Callum McKenzie  <callum@physics.otago.ac.nz>

        * freecell.scm: Freecell players rejoice, a patch from Juri
	Pakaste (juri@iki.fi) to implement supermoves. Bugs 127235 and
	124522.
	
2003-10-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am (INCLUDES): Removed *_DISABLE_DEPRECATED.

2003-10-27  Callum McKenzie  <callum@physics.otago.ac.nz>

	* card.c (load_pixmaps): Applied a patch from Mark Schreiber to
	catch the case where the card images are missing.

2003-10-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am (install-data-local): Change the way gconf files are
	installed. This should improve things for people building outside
	the source tree. See bug #123192.

2003-10-18  Steve Chaplin

       * dialog.c (show_select_game_dialog): Free memory when finished using
       it. Update the casting macros used when calling g_signal_connect().
       (select_rules): Free the old filename (if any) before getting the
       current filename.

2003-10-12  Callum McKenzie  <callum@physics.otago.ac.nz>

	* odessa.scm (game-over-helper): Altered the hint function so
	tableau reshuffling is preferred to building the
	foundation. i.e. bringing the hints into line with the recommended
	strategy in the documentation. Fixes bug #51694.

2003-10-01  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c (create_press_data): Initialise the press_data structure
	to zero so we can correctly detect when we haven't actually
	allocated sub-components. Fixes bug #123328.

2003-09-13  Callum McKenzie  <callum@physics.otago.ac.nz>

	* press_data.h:
	* press_data.c:
	* sol.c:
	* events.c: Clean up the fix for bug #121762.

2003-09-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c (new_game): Explicitly discard any stacks of cards we may
	be dragging at the time of a new game. Fixes the symptoms of bug
	#121762.

2003-07-27  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.h: 
	* sol.c: Fix compiler warnings. 

	* menu.c (help_about_callback): Use g_str* functions rather than
	string.h functions.

	* dialog.c (show_select_game_dialog): Fix a compiler warning. It's
	a bit ugly though.

2003-07-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* freecell.desktop.in: 
	* sol.desktop.in: Update name to fit HIG (bug 116916).

2003-07-06  Callum McKenzie  <callum@physics.otago.ac.nz>

	* splash.c (splash_new): Connect our expose callback as an "after"
	signal to let the normal drawing routines do their thing.

2003-07-05  Callum McKenzie  <callum@physics.otago.ac.nz>

	* spider.scm: Made the ending condition a little less aggressive
	and more like spiderette. Patch from Paolo Borelli.

2003-06-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* ten_across.scm (less-than-same-cards): Removed some diagnostic
	code that shouldn't be there.

	* *.scm: Changes to remove trailing spaces in translatable
	strings.

	* aisleriot.schemas.in: Remove periods from the end of short
	descriptions.

2003-06-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c: Remove the dirent.h include since we don't need it
	anymore and it can upset FreeBSD if we don't also include
	sys/types.h which is also unneeded.

2003-06-20  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c (new_game): Fix Jon's crash-at-start bug. If the game was
	unplayable from the start (fortress could do this) then it 
	would do weird shit and possibly crash. This would also have
	caused anti-social behaviour on the occasional new game.

2003-06-19  Callum McKenzie  <callum@physics.otago.ac.nz>

	* slot.h: 
	* slot.c:
	* card.c: 
	* menu.c: 
	* press_data.c: 
	* events.c: 
	* cscmi.c: 
	* dialog.c: 
	* sol.c: 
	* slot.c:
	* splash.c: Compile fixes.

2003-06-16  William Jon McCann  <mccann@jhu.edu>

	* slot.c: 
	* card.h: 
	* card.c:
	* draw.c: Use pixbuf for slot image.  This solves the problem of
	unmasked pixels in the corners of the slot pixmaps.

	* dialog.c: Fix compiler warning.
	
2003-06-13  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.scm (redo): Horrific thinko. #f is a little different from #t.

2003-06-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c:
	* sol.c: i18n fixes from Christian Neumair (bug #114875).
	
	* valentine.scm (button-clicked): () is not actually valid
	scheme. 1.3.4 allowed it 1.6 doesn't. Replaced with the equivalent
	'(). Fixes bug #114850.

	* dialog.c (show_preferences_dialog): Use games_frame because it
	looks cool.

2003-06-10  Christian Neumair  <chris@gnome-de.org>

	* *.scm: Replace ":  " by ": ". There is no reason to lengthen the
	status bar messages by one space.

2003-06-09  William Jon McCann  <mccann@jhu.edu>

	* dialog.c: 
	* sol.c: Removed separator from dialogs as in HIG.

2003-06-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c: Re-implement the third-button-reveals-card
	thing. Fixes bugs 103646.

2003-06-07  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: Make the preferences dialog auto-apply and HIG
	compliant. The options are still there, they just look prettier.

2003-06-06  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c: Change the game over/won dialog to be an information
	box rather than a question since the message isn't actually a
	question (although the player does have a choice). Also changed
	the wording to use sentence capitalisation.

	* sol.scm: Do the scheme end of the undo/redo sensitivity code.

	* sol.c (new_game): Set the undo/redo buttons to
	insensitive at the beginning of a game.

	* cscmi.c: The C <-> scheme interface for settings the undo and
	redo button sensitivity.

	* menu.h:
	* menu.c: The C end of the undo/redo sensitivity code.

	* sol.c: Take advantage of the gconf support routines in
	libgames-support.

	* .cvsignore: Ignore the schemas file.

	* dialog.c
	* sol.c
	* menu.c
	* aisleriot.schemas.in: - -> _ because the spec says we can't use
	it.

2003-06-05  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c (property_apply): 
	* sol.h: 
	* Makefile.am: 
	* aisleriot.schemas.in: Aisleriot now uses gconf.

	* sol.c (quit_app): Don't ask if quit has been selected. Trust the
	user.

	* menu.h: 
	* sol.c:
	* menu.c: Reorganised the menu and the toolbar so that they match
	each other in terms of order and tooltips. Also give the hint
	toolbar button the "help" lifesaver that all the other games do.
	Added an option to toggle the toolbar on and off.
	
2003-06-04  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c (show_select_game_dialog): Updates to the select dialog
	to avoid flickering and make resizing behave. Fixes bug #114327.

2003-06-03  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.scm: Added a wrapper for eval so it runs on modern guiles
	which actually do what R5RS says while still running on 1.3. Fixes
	bug #114191.

2003-05-30  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am (scoredir): Removed since it was unused.

2003-05-30  Callum McKenzie  <callum@physics.otago.ac.nz>

	* .cvsignore: Add freecell.desktop.

2003-05-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* menu.c (help_about_callback): 
	* dialog.c (show_preferences_dialog): Use gtk_window_present to
	display dialogs.

2003-05-23  Callum McKenzie  <callum@physics.otago.ac.nz>

	* plait.scm: 
	* fortunes.scm: 
	* eagle_wing.scm: 
	* sol.scm (get-name): Rather than constructing cards from the suit
	and value do them all individually. This is to help the
	translators. The word "the" has also been moved to the beginning of
	the descriptions rather than the format strings.

2003-05-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* first_law.scm (removable?): More i18n fixes.

	* plait.scm: 
	* fortunes.scm: 
	* eagle_wing.scm: Replaced the case 3 hint with an easier to
	translate case 0 hint.

	* dialog.c (show_hint_dialog): Deprecated case 3 hints since they
	are too hard to translate.

	* first_law.scm (removable?): 
	* sol.scm: i18n fixes, removed the string concatenations.

2003-05-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c (show_select_game_dialog): Select the current game as
	the default. Fixes bug #113113.

2003-05-21  Malcolm Tredinnick <malcolm@commsecure.com.au>

	* Makefile.am: Now that SCHEME_GAMES.h has had its build rules
	removed, it is better not to try and build it.

2003-05-20  Callum McKenzie  <callum@physics.otago.ac.nz>

	* sol.c (new_game): Fixed a warning when trying to put
	game-specific stuff in the help menu.

	* Makefile.am: Removed the code to generate SCHEME_GAMES.h, we
	don't need it anymore.

	* cscmi.c (cscm_init): gettext -> _

	* *.scm: Changed all the "gettext" calls to "_" so we don't have
	to alter intltools.

2003-05-18  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am: Arranged for the autogeneration of SCHEME_GAMES.h
	since I don't understand how to get the strings automatically
	extracted from the .scm files using intltool.

2003-05-17  Callum McKenzie  <callum@physics.otago.ac.nz>

	* *.scm: Updated the scheme files to use the new gettext
	call.

	* sol.c: Changed the code so that using --variation to select a
	game only works for that one session. This is an awful hack, but I
	can't see a better way to do it.

2003-05-16  Callum McKenzie  <callum@physics.otago.ac.nz>

	* klondike.scm (get-options): 
	* poker.scm (get-hint): Added gettext calls in the scheme code.

	* dialog.c (show_hint_dialog): 
	* cscmi.c (scm_gettext): Added a scheme wrapper for gettext. Now
	if only we could extract the strings from the schemes files ...

	* Makefile.am: Created a freecell emulation desktop entry.

	* menu.c: Removed reference to scroll-menu.h. I did remember to
	test, I just didn't test properly :(.

2003-05-15  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am: Removed scroll-menu.*, the code isn't used anymore.

2003-05-13  Callum McKenzie  <callum@physics.otago.ac.nz>

	* Makefile.am (SUBDIRS): Removing the old pixmaps directory. 600k
	of pixmaps that aren't used by anything.

	* sol.h: 
	* card.h: Remove pathnames in include directives. The correct path
	to gdk-card-image.h is now handled in Makefile.am .

	* Makefile.am: Updated to allow for the movement of the
	gdk-card-image code.

2003-05-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* events.c: Re-implemented the double-click code to ensure double
	click events don't happen when the second click is on a different
	card. Fixes #102449

2003-05-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* dialog.c (show_select_game_dialog): More changes to try and
	improve the "Select" dialog. As per bug #110730.

	* menu.c: Renamed the "New game of..." item to "Select...", the
	justification for this can be found in bug #110730.

2003-05-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* yukon.scm (check-a-tableau): Finally applying my fix to bug
	#64236.

	* sol.c (eval_installed_file): HIG fixup as per bug #112244.

2003-04-30  Abel Cheung  <maddog@linux.org.hk>

	* ChangeLog: Convert to UTF-8.

2003-04-06  Ross Burton  <ross@burtonini.com>

	* agnes.scm: Fix hints, thanks to
	kyamada@psg.cs.titech.ac.jp. Closing #90103.

2003-01-15  Callum McKenzie  <callum@physics.otago.ac.nz>

	* freecell.scm: Updated undo/redo to new scheme. This may fix bug
	#83517 (it certainly fixes a bug and the symptoms in #83517 fit
	the profile).

	* plait.scm:  Updated undo/redo to new scheme.

	* labyrinth.scm: Updated undo/redo to new scheme.

	* glenwood.scm: Updated undo/redo to new scheme. Fixes a
	previously undiscovered bug.

	* eight_off.scm: Updated undo/redo to new scheme. This fixes a
	previously undetected bug.

	* chessboard.scm: Updated undo/redo to new scheme.

	* camelot.scm: Updated undo/redo to new scheme.

	* bakers_game.scm: Updated undo/redo to new scheme. Refixes
	#91101/#90905.

	* seahaven.scm: Removed the old undo/redo code in favour of the
	new transparent scheme. Should be a better fix for the
	bugs #65242/#89540 (already closed).

	* sol.scm: Added transparent support for undo/redo of variables in
	individual games. The variables that were already being saved have
	not been altered to use this method.

2003-03-07  Ross Burton  <ross@burtonini.com>

	* sol.c: Fix up compile warnings.

2003-03-03  Ross Burton  <ross@burtonini.com>

	* dialog.c: Remove the headers from the New Game dialog, and inset
	the table.

	* menu.c (help_about_callback): Set the About dialog as transient
	for the main window.

	* menu.c:(help_about_callback): Remove the evil "New game of..."
	sub-menu, and use the "Select" dialog which nobody knew existed.

2002-12-11  Ross Burton  <ross@burtonini.com>

	* dialog.c: Allow the user to have a choice in the Game Won
	dialog. Slightly edited patch from pborelli@katamail.com, closing
	#100120.

2002-11-18  Fernando Herrera <fherrera@onirica.com>

	* sol.desktop.in: add X-GNOME-BUGZILLA stuff

2002-11-18  Jeremy Browne  <jeremy@synonymous.ca>

	* sol.c: Changes to quit dialog for consistency with other parts of
	gnome-games package. (Bug #97321)

2002-11-11  Ross Burton  <ross@burtonini.com>

	* gnome-aisleriot.png: New icon contributed by Timothy Musson.

2002-10-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* klondike.scm (get-hint): Fixed an off-by-one error in checking
	FLIP-COUNT and also added a default "no hint available" message
	for the extremely rare situation where you can't move anything off
	the foundation decks. It's still a completely unsatisfactory
	answer to the klondike hints problem, but my brain hurts too much
	tonight to fix it. Mostly fixes #85712.

2002-10-04  Callum McKenzie  <callum@physics.otago.ac.nz>

	* seahaven.scm: Added (record-move) and (undo-func) so that the
	free-reserves variable is set correctly after an undo. This may be
	the cause of bug #65242.

2002-09-30  Ross Burton  <ross@burtonini.com>

	* events.c (button_press_event): Fix very stupid code (== instead
	of =), closing #89822. Thanks to Callum McKenzie for being such a
	lisp star :)

2002-09-27  Callum McKenzie  <callum@physics.otago.ac.nz>

	* ten_across.scm: Removed give-status-message and all references
	to it. This should fix bug #94078. It seems to be cut-and-paste
	residue and is unnecessary in this particular game.

2002-09-23  Ross Burton  <ross@burtonini.com>

	* spider.scm (button-clicked): Fix #84498 with a patch from Callum
	McKenzie <callum@physics.otago.ac.nz>

2002-08-20  Gustavo Giraldez  <gustavo.giraldez@gmx.net>

	* events.c (motion_notify_event): Fix the "dragging cards outside
	the window".
	* menu.c, sol.c: Fix some memory leaks. Closing #86775.

2002-08-18  Ross Burton  <ross@burtonini.com>

	* sol.c (quit_app): Fix the callbacks for the Quit handler, and
	correct a typo.

2002-07-12  Samuel Stringham <sams@e-sa.com>

	* sol.c (quit_app): Display a comfirmation dialog when quitting.

2002-07-04  Ross Burton  <ross@burtonini.com>

	* canfield.scm: canfield didn't know when the game was over. Also
	fix a off-by-one in "deal-possible?". Closes #74185.

2002-06-17  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: install the desktop file in $(datadir)/applications
	(Closes: #85535)

2002-06-06  Bastien Nocera  <hadess@hadess.net>

	* card.c: (get_pixmap):
	* sol.c: (eval_installed_file), (main):
	* splash.c: (splash_new): fixes for when $(datadir) is not the same
	as libgnome's

2002-06-04  Fernando Herrera <fherrera@onirica.com>

	* events.c: (button_press_event): Fix clicks problems. Removed unused
	SINGLE_ACTION code (Closes: #84162)

2002-06-03  Bastien Nocera  <hadess@hadess.net>

	* menu.c: remove Quit toolbar item

2002-05-07  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: fixes

2002-05-07  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* card.c: (get_card_width), (get_card_height), (get_pixmap),
	(free_pixmaps):
	* dialog.c: (show_game_over_dialog), (select_rules), (select_game),
	(show_select_game_dialog), (show_hint_dialog), (property_apply),
	(show_preferences_dialog), (option_apply), (get_option_page),
	(show_rules_options_dialog):
	* draw.c: (draw_cards), (take_snapshot):
	* events.c: (drop_moving_cards), (configure_event):
	* menu.c: (help_about_callback), (create_menus):
	* press_data.c: (generate_press_data):
	* scroll-menu.c: (scroll_menu_get_type), (make_scroller):
	* sol.c: (game_file_to_name), (eval_installed_file), (save_state),
	(set_score), (create_sol_board), (create_main_window),
	(create_press_data), (main_prog), (main):
	* splash.c: (splash_update), (splash_new): big Gnome2 port patch by
	Shahms E. King <shahms@shahms.com>

2002-05-07  Jacob Berkman  <jacob@ximian.com>

	* Makefile.am (SUBDIRS): remove docs, as help is already there

2002-04-30  Abel Cheung  <maddog@linux.org.hk>

	* chessboard.scm:
	* sol.scm:
	Use " " instead of "" as default statusbar message, to avoid
	translation file header showing up in status bar.

Sat Apr 13 09:56:29 2002  Jonathan Blandford  <jrb@gnome.org>

	* sol.c (create_main_window): set_policy is no longer needed, #72217

	* events.c: Return FALSE instead of TRUE.  This code predates GTK
	1.0, #74002

	* cscmi.c (scm_myrandom): use g_rand* functions, #60427

2002-02-16  Chris Lyttle  <chris@wilddev.net>

	* docs/C: removed sgml files from build and cvs

2002-02-16  Kjartan Maraas  <kmaraas@gnome.org>

	* *.[ch]: I18N fixes.
	
2002-02-14  Chris Lyttle  <chris@wilddev.net>

	* Makefile.am: added help subdir

2002-02-13  Gregory Leblanc  <gleblanc@linuxweasel.com>

	* canfield.scm: Turn over three cards at a time, from the stock,
	per rules.

2002-02-02  Zbigniew Chyla  <cyba@gnome.pl>

	* menu.c (help_about_callback): Don't try to translate empty string.

2001-12-30  Juan Pablo Mendoza <jpablo@gnome.org>

	* card.c:
	* events.c:
	* menu.c:
	* scroll-menu.c:
	* sol.c:
	* splash.c:

	Compile and run !

2001-12-19  Seth Nickell  <snickell@stanford.edu>

	* Makefile.am:
	* sol.desktop:

	Install into proper location, add a Categories field.
	
2001-12-04  Duarte Loreto <happyguy_pt@hotmail.com>

        * sol.desktop: Updated Portuguese Translation

2001-09-16  Carlos Perelló Marín <carlos@gnome-db.org>

	* translatable_game_names.h: Updated.

2001-08-12  Abel Cheung  <maddog@linux.org.hk>

	* SCHEME_GAMES.h royal_east.scm: borp -> melborp. Reduce difficulty
	  for translators. :)

2001-07-27  Abel Cheung  <maddog@linux.org.hk>

	* aisleriot.desktop: Added traditional Chinese translation.

Thu Jul 19 01:50:53 2001  Jonathan Blandford  <jrb@redhat.com>>

	* aisleriot.sgml: remove block-ten docs.
	* Makefile.am: remove block-ten file from installation until it is
	fixed.
	* agnes.scm: add (theoretical) winning game to seed.

2001-07-11  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	From James LewisMoss <jimdres@mindspring.com>.

	* ten_across.scm: New game.

2001-07-08  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	Patch from Don Beusee <dbeusee@us.oracle.com>

	* events.c (button_press_event), (button_release_event): Middle
	  click == double click.

2001-07-07  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	* sol.c:
	* card.c: Kick imlib ass.

2001-07-06  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	* clock.scm, SCHEME_GAMES.h: Sunlight gives us vitamin D :-)
	  (pointed out by Göran Uddeborg)

2001-07-05  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	* sol.c (eval_installed_file): Fix typo.

2001-07-05  Christian Rose  <menthos@menthos.com>

	sol.desktop: Added Swedish entries.

Sat Jun 30 16:33:25 2001  Rosanna Yuen  <zana@webwynk.net>

	* chessboard.scm: added a new game

2001-06-10  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	* sol.c (new_game): Save the most recently played game. Fix bug #18929

	* Makefile.am: (EXTRA_DIST) Add translatable_game_names.h and
	  template.scm.
	  (types_DATA): Add plait.scm.

2001-06-09  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	* sol.c (eval_installed_file): Show a error and exit if the file
	  is not found. Fix bug #2532.

2001-23-04  Kenneth Christiansen  <kenneth@gnu.org>

	* get_names.pl: added script than makes header
	file to add to POTFILES.in when run. Should be
	run, everytime a scm file is added, or renamed.

Thu Mar  8 19:08:45 2001  Rosanna Yuen  <zana@webwynk.net>

	* fortress.scm: added a new game
	* streets_and_alleys.scm: added a new game

Thu Mar  8 12:20:44 2001  Jonathan Blandford  <jrb@redhat.com>

	* sol.c (new_game): minor fixup.

Wed Mar  7 23:56:52 2001  Rosanna Yuen  <zana@webwynk.net>

	* king_albert.scm (button-double-clicked): fixed a random
	procedure call so it now works

Wed Mar  7 19:48:30 2001  Rosanna Yuen  <zana@webwynk.net>

	* helsinki.scm: added a new game
	* easthaven.scm: added a new game
	* will_o_the_wisp.scm: added a new game
	* spiderette.scm: added a new game

Tue Mar  6 21:43:32 2001  Rosanna Yuen  <zana@webwynk.net>

	* whitehead.scm: added a new game
	* king_albert.scm: added a new game

Mon Mar  5 21:27:48 2001 John Fleck <jfleck@inkstain.net>

	* docs/C/definitions.sgml - adding id's to glossentries so Nautilus
	can navigate the glossary

Tue Mar  6 00:02:14 2001  Rosanna Yuen  <zana@webwynk.net>

	* golf.scm: added a new game 
	* thieves.scm: cleaned up some code; fixed it so undo no longer
	spreads apart the cards.
	* diamond_mine.scm: added a new game

Fri Mar  2 23:37:18 2001  Rosanna Yuen  <zana@webwynk.net>

	* agnes.scm: added a new game
	* jumbo.scm: fixed hint function 
	* treize.scm: fixed hint function
	* yield.scm: fixed hint function

Thu Mar  1 05:01:37 2001  Rosanna Yuen  <zana@webwynk.net>

	* jumbo.scm: added a new game 
	* gay_gordons.scm: added a new game
	* block_ten.scm: added a new game
	* yield.scm: added a new game

Wed Feb 28 02:00:02 2001  Jonathan Blandford  <jrb@redhat.com>

	* menu.c (create_menus): Bad Hack (TM).  Stole _v_'s
	scroll_menu and used it here.

	* scroll_menu.[ch]: added.

Tue Feb 27 23:39:10 2001  Rosanna Yuen  <zana@webwynk.net>

	* maze.scm (suit-next?): fixed some function calls

Tue Feb 27 20:11:46 2001  Rosanna Yuen  <zana@webwynk.net>

	* eight_off.scm: added a new game
	* bakers_game.scm: added a new game
	* jamestown.scm: added a new game 
	* sir_tommy.scm: added a new game
	* isabel.scm: added a new game
	* seahaven.scm (new-game): removed debugging code

Mon Feb 26 19:12:13 2001  Rosanna Yuen  <zana@webwynk.net>

	* escalator.scm: added a new game 
	* quatorze.scm: added a new game
	* treize.scm: added a new game 
	* peek.scm: added a new game
	* scuffle.scm: added a new game

Sun Feb 25 21:57:23 2001  Rosanna Yuen  <zana@webwynk.net>

	* elevator.scm (new-game): fixed starting width of screen
	* camelot.scm (new-game): fixed starting width of screen
	* dialog.c (show_select_game_dialog): changed the dialog to
	contain a clist

Sun Feb 25 20:59:15 2001  Rosanna Yuen  <zana@webwynk.net>

	* labyrinth.scm: added a new game.

Sun Feb 25 04:33:12 2001  Rosanna Yuen  <zana@webwynk.net>

	* poker.scm: added a new game.

Sat Feb 24 21:30:05 2001  Rosanna Yuen  <zana@webwynk.net>

	* cover.scm: added a new game.  that makes 40!

Sat Feb 24 13:52:50 2001  Rosanna Yuen  <zana@webwynk.net>

	* thieves.scm (button-clicked): fixed crash which occurred when
	blank slot was clicked
	* valentine.scm: added a new game

Wed Feb 21 21:20:56 2001  Rosanna Yuen  <zana@webwynk.net>

	* seahaven.scm: added a new game

Wed Feb 21 02:34:09 2001  Rosanna Yuen  <zana@webwynk.net>

	* bakers_dozen.scm: added a new game
	* monte_carlo.scm: fixed a hint bug
	
Wed Feb 21 01:24:52 2001  Jonathan Blandford  <jrb@redhat.com>

	* menu.c: Added Matthew Wilcox to about box.

Tue Feb 20 19:21:12 2001  Rosanna Yuen  <zana@webwynk.net>

	* monte_carlo.scm: added a new game
	* neighbor.scm: fixed screen size problem

Tue Feb 20 17:19:28 2001  Rosanna Yuen  <zana@webwynk.net>

	* thirteen.scm (new-game): fixed screen size problem (bug 3087)

Tue Feb 20 17:13:46 2001  Rosanna Yuen  <zana@webwynk.net>

	* spider.scm (get-hint): got around the premature end-of-game call
	by never letting the game end naturally.

Tue Feb 20 16:17:37 2001  Rosanna Yuen  <zana@webwynk.net>

	* gypsy.scm: added a new game

Mon Feb 19 17:06:50 2001  Rosanna Yuen  <zana@webwynk.net>

	* maze.scm: Matthew Wilcox's new maze version; fixes undo and
	scoring.

Mon Feb 19 03:53:39 2001  Rosanna Yuen  <zana@webwynk.net>

	* lady_jane.scm (get-hint): implemented hints for this game.
	about bloody time...

Sun Feb 18 19:31:19 2001  Rosanna Yuen  <zana@webwynk.net>

	* glenwood.scm: added a new game for gleblanc 

Sat Feb 17 23:34:16 2001  Jonathan Blandford  <jrb@redhat.com>

	* sol.c (new_game): Fixed bugs #7033 and #5324.

Sat Feb 10 15:34:14 2001  Rosanna Yuen  <zana@webwynk.net>

	* thieves.scm (button-clicked): Fixed bug #20352 which caused
	crashing when empty slot was clicked.

2001-02-09  Gregory Leblanc <gleblanc@cu-portland.edu>

	* docs/aisleriot.sgml: Updated for and tested in nautilus (nope,
	it doesn't work properly.)

Tue Feb 06 20:26:42 2001  George Lebl <jirka@5z.com>

	* dialog.c:  close old hint dialog when new dialog is made, and
	  use printf style strings rather then appending strings together,
	  and lastly, free allocated memory.

Tue Feb 06 17:47:06 2001  George Lebl <jirka@5z.com>

	* splash.c: fix further splash destroyed too early fun and fix
	  multiple exposes causing quit fun, or destroyed before expose
	  race hang fun.

Tue Feb 06 16:49:12 2001  George Lebl <jirka@5z.com>

	* card.c, dialog.c, draw.c, events.c, press_data.c, sol.c:  Make
	  sure aisleriot works even with missing or currupted installed data,
	  plus sprintf excorcism out of anality

	* splash.c: fix a crash when splash is killed prematurely by the user

	* docs/Makefile.am:  Fix makefile rule for db2html to work

2000-05-22  Ian Peters  <itp@gnu.org>

	* maze.scm: added to cvs (not distributed by default yet)

2000-05-21  Rosanna Yuen  <rosanna_yuen@yahoo.com>

	* hopscotch.scm (check-to-foundation): disallow putting cards on
	top of kings.
	* first_law.scm (button-released): removed movability of cards
	so that only clicking works.  Simplifies code and fixes seg fault.

2000-05-09  Martin Baulig  <baulig@suse.de>

	* sol.c (main): Call gnome_score_init () to fix security
	exploit to group games.

2000-04-26  Valek Filippov  <frob@df.ru>

	* menu.c: Changed jrb e-mail to jrb@redhat.com to reflect
	          the AUTHORS file. (from kanikus)

2000-04-22  Ian Peters  <itp@gnu.org>

	* sol.c: main_prog: pop the visual and colormap when we're done setting
	  stuff up, fixes black about dialog on multi-depth displays

1999-09-22  Dave Camp  <campd@oit.edu>

	* Makefile.am (INCLUDES): Use $(GUILE_INCS)

1999-08-12  Rosanna Yuen  <rwsy@mit.edu>

	* odessa.scm : fixed double clicking bug so that a) it doesn't
	crash and b)the next card flips up if necessary. 

1999-08-09  Robert Brady  <rwb197@ecs.soton.ac.uk

	* sol.c : applied Irix compiling fix from David Kaelbling 
	  <drk@sgi.com> : [bug #1781].
	
1999-08-03  Rosanna Yuen  <rwsy@mit.edu>

	* straight_up.scm (game-continuable): makes sure the game knows
	that its done.
	(button-double-clicked): fixed it so double click function doesn't
	get called unless 1) there's a card and 2) it is visible.

1999-08-01  Rosanna Yuen  <rwsy@mit.edu>

	* kansas.scm (check-a-tableau): made the hint function for this
	game smarter than me.

1999-07-25  Rosanna Yuen  <rwsy@mit.edu>

	* eagle_wing.scm (complete-transaction): fixed the status bar
	message discrepancy in this game.

1999-07-23  Rosanna Yuen  <rwsy@mit.edu>

	* kansas.scm (empty-tableau?): makes sure that no cards can be
	moved down before game is officially over.

1999-07-23  Robert Brady <rwb197@ecs.soton.ac.uk>

	* events.c: Fixed bug #1192 (dragging a card to the toolbar and
	releasing mouse button there caused odd things).

1999-07-10  Rosanna Yuen  <rwsy@mit.edu>

	* kansas.scm: fixed a bug in this game.

1999-06-29  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* SCHEME_GAMES.h: Added more translatable strings. i18n in Aisleriot
	(especially for Hints), is somewhat broken, it appears that only
	languages with the same word order as English can be translated into.

1999-06-15  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* card.h, cscmi.h, dialog.h, events.h, menu.h, press_data.h, sol.h, splash.h: Use
	ANSI C prototypes for functions with no parameters.

	* events.h, events.c: Moved STATUS_* things into the header.

	* events.c (waiting_for_mouse_up): Added.

	* menu.c, dialog.c: Inserted calls to waiting_for_mouse_up where needed.

	* sol.c: (is_game) Fixed warning.

	* clock.scm: Fix typo.

1999-06-13  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* cscmi.c (scm_set_statusbar_message): Return a value.

	* press.data.c (generate_press_data): Make definition agree with the prototype.

	* sol.c (create_press_data): Initialise press_data->status.

	* events.c (button_press_event): Ignore button 3 presses whilst a card is 
	being dragged, fixing bug #1469.
	(button_release_event):	Ignore buttons releases if the button that caused 
	the current state is still down (i.e. no more button3 click, button1 click,
	button1 release causing STATUS_SHOW to end.)
	
1999-05-24  Brandon S. Allbery" <allbery@ece.cmu.edu>

	* cscmi.c (cscm_init): Renamed scm_random to scm_myrandom, since
	scm_random is part of recent Guiles.

1999-04-12  Rosanna Yuen  <rwsy@mit.edu>

	* elevator.scm (check-for-flips): fixed bug to make sure last card
	gets flipped if necessary.

1999-04-10  Rosanna Yuen  <rwsy@mit.edu>

	* lady_jane.scm (get-stock-no-string): fixed the number of cards
	left in stock in statusbar

1999-04-09  Rosanna Yuen  <rwsy@mit.edu>

	* klondike.scm (give-status-message): added number of redeals left
	to statusbar
	* freecell.scm (button-double-clicked): fixed scoring for
	double-clicking.
	* osmosis.scm (game-over): fixed the game over function
	(give-status-message): added number of redeals left to statusbar

1999-04-08  Rosanna Yuen  <rwsy@mit.edu>

	* doublets.scm (game-over): fixed to make sure game won pops up
	even when you ahven't gone thru all the redeals

1999-03-27  Rosanna Yuen  <rwsy@mit.edu>

	* lady_jane.scm: added new game

1999-03-25  Rosanna Yuen  <rwsy@mit.edu>

	* zebra.scm: added new game
	* thumb_and_pouch.scm (dealable?): fixed hints
	(give-status-message): added redeals to statusbar

1999-03-23  Rosanna Yuen  <rwsy@mit.edu>

	* scorpion.scm (button-clicked): made sure dealing new cards will
	adjust points.
	(button-released): disallowed moving kings to stock.
	* thumb_and_pouch.scm (new-game): removed reliance on unreliable
	variable.
	* canfield.scm (give-status-message): added number of redeals to
	statusbar message.
	* straight_up.scm: added new game

1999-03-19  Rosanna Yuen  <rwsy@mit.edu>

	* first_law.scm: added new game

1999-03-17  Rosanna Yuen  <rwsy@mit.edu>

	* thumb_and_pouch.scm: fixed hint function

1999-03-14  Rosanna Yuen <rwsy@mit.edu>

	* thumb_and_pouch.scm: added new game 
	* klondike.scm (new-game): added (set-ace-low)
	* bristol.scm (button-double-clicked): added double-click
	* odessa.scm (button-double-clicked): added double-click
	* sol.scm: fixed undo so it now works  (many game files changed to
	allow undo to work)
	* events.c: fixed event handling so that it makes sense.
	* menu.c: fixed about box
	* yukon.scm: finished hint

1999-03-11  Ian Peters  <itp@gnu.org>

	* menu.c: Killed the periods at the end of the tooltips.

1999-03-10  Ian Peters  <itp@gnu.org>

	* dialog.c: Calls to gnome_dialog_set_parent added for Game options,
	Preferences, and game over dialog.

1999-03-09  Rosanna Yuen  <rwsy@mit.edu>

	* klondike.scm (button-double-clicked): moved the double clicking
	code back to the double clicking function.
	* clock.scm (button-double-clicked): fixed double clicking bug

1999-03-06  Rosanna Yuen  <rwsy@mit.edu>

	* scorpion.scm (button-released): finished scorpion.scm (minus hints)
	* odessa.scm (begin-score): fixed scoring of dealt cards.

1999-03-06  Rosanna Yuen  <rwsy@mit.edu>

	* template.scm: added a template to facilitate faster creation of
	games.
	* scorpion.scm: added new (incomplete) game.

1999-03-04  Rosanna Yuen  <rwsy@mit.edu>

	* royal_east.scm: added new game.

1999-03-03  Rosanna Yuen  <rwsy@mit.edu>

	* westhaven.scm: added new game.

1999-03-02  Rosanna Yuen  <rwsy@mit.edu>

	* union_square.scm: added new game

1999-02-24  Rosanna Yuen  <rwsy@mit.edu>

	* added info to status bar for most games
	* spider.scm: added checks for game over and game won, and added
	hint support.
	
1999-02-23  Rosanna Yuen  <rwsy@mit.edu>

	* bristol.scm: added new game

1999-02-22  Rosanna Yuen  <rwsy@mit.edu>

	* spider.scm: added scoring; fixed minor bugs
	* hopscotch.scm: added new game
	* beleaguered_castle.scm: moved deck making to sol.scm
	* sol.scm (make-deck-list-ace-low): moved this from
	beleaguered_castle.scm
	* auld_lang_syne.scm: added new game
	* eagle_wing.scm (button-double-clicked): fixed minor bug with
	last Reserve card.
	* klondike.scm (button-double-clicked): allows double clicking to
	acutally work for those who prefer it.
	(new-game): made the waste pile only 1 wide if only dealing 1 card
	at a time.  (unfortunately, this only happens when game is
	restarted.  perhaps force new game when options change?)
	
1999-02-22  Rosanna Yuen  <rwsy@mit.edu>

	* fourteen.scm: added new game
	* clock.scm (button-clicked): made clicking kings easier
	(complete-transaction): added scoring support

1999-02-21  Rosanna Yuen  <rwsy@mit.edu>

	* splash.c, sol.c, menu.c: s/Aisleriot/AisleRiot

1999-02-21  Rosanna Yuen  <rwsy@mit.edu>

	* freecell.scm: added score support
	* menu.c (help_about_callback): proofread the about box text

1999-02-20  Rosanna Yuen  <rwsy@mit.edu>

	* fortunes.scm (get-hint): made it so the hints don't tell you to
	move something into an empty slot if there isn't anything to move.

	* camelot.scm: (button-released) disallows matching with wastepile
	(button-clicked): disallows more than one card in wastepile;
	allows clicking on 10's to work better. 
	(new-game): rearranged layout for more pleasant viewing.

1999-02-20  Jonathan Blandford  <jrb@redhat.com>

	* card.c (get_card_picture): this bug has been annoying me for a
	while.  You can now set-ace high.

1999-02-20  Rosanna Yuen  <rwsy@mit.edu>

	* beleaguered_castle.scm (new-game): fixed spacing so that
	hopefully cards will no longer overlap.
	
	* thirteen.scm (check-for-flips): fixed bug in flipping code

1999-02-20  Rosanna Yuen  <rwsy@mit.edu>

	* thirteen.scm: added another new game =)

1999-02-19  Rosanna Yuen  <rwsy@mit.edu>

	* elevator.scm: added new game

1999-02-04  Jonathan Blandford  <jrb@redhat.com>

	* slot.c: Based on code by <Seanster@BrainImplants.com>, we now
	support pyramid-like games.

1999-01-26  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* menu.c: Remove the File menu.  This does not make sense. Put
	only a Game menu.

1999-01-16  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* freecell.scm: Removed buggy double-click handler and cleaned up.
	Still more work needed.

	* menu.c (help_about_callback): Changed my Email address.

1999-01-10  Nat Friedman  <nat@nat.org>

	* sol.c (main_prog): Call install_menu_hints.

	* menu.c: Standardized the menus.
	(install_menu_hints): New function.

1999-01-06  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* sol.c (main): Fix the name

1999-01-05  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* sol.c (main): Use gnome_datadir_file_unconditional here. 

1998-12-30  Carsten Schaar  <nhadcasc@fs-maphy.uni-hannover.de>

	* sol.c (main): Now retrieves it's state from the master client,
 	because the cloned client is not working anymore.

1998-12-28  Rosanna Yuen  <rwsy@mit.edu>

	* neighbor.scm : added new game

1998-12-28  Rosanna Yuen  <rwsy@mit.edu>

	* beleaguered_castle.scm: added double-click and hint support to
	this game.
	* camelot.scm: fixed potential aces bug.

1998-12-16  Rosanna Yuen  <rwsy@mit.edu>

	* beleaguered_castle.scm: added new game; added scoring
	
1998-12-02  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>

	* sol.c (new_game): small bug fix for "gnome_app_fill_menu"
	num-of-args.

1998-11-29  Carsten Schaar  <nhadcasc@fs-maphy.uni-hannover.de>

	* menu.c: Removed 'GNOMEUIINFO_JUSTIFY_RIGHT'.

Wed Nov 25  Felix Bellaby  <felix@pooh.u-net.com>
	
	* camelot.scm, freecell.scm: minor fixes.
	* cscmi.c, sol.c: minor fixes.
	* events.c: ensure scheme only called twice on double click.
	* press_data.h: simplified.	
	* menu.c, press_data.c, sol.scm: added undo, redo - still inefficient.

Sat Nov 21 Felix Bellaby <felix@pooh.u-net.com>
	* Makefile.am: use png images.
	* baize.png: use png images.
	* TODO: updated.
	* sol.h: synced with card library.
	* card.h: synced with card library.
	* card.c: synced with card library.
	* dialog.c: added card prefs dialog.
	* sol.c: saves card prefs. 
	
1998-11-19  Richard Hestilow  <hestgray@ionet.net>

	* menu.c: Fixed underscore accelerator in "Exit" to be on the X.
	
1998-11-14  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* freecell.scm: Added double-click handler.  Initial stuff for
	"auto move".

Wed Nov 11 Felix Bellaby <felix@pooh.u-net.com>
	* sol.c: fixed up session management to match bugs in gnome-session.
	
1998-11-09  Jonathan Blandford  <jrb@redhat.com>

	* sol.desktop (Name): Now the name of the game is Aisleriot, as it 
	should be.
	* splash.c (splash_new): Start the splash screen in the middle of
	the screen

Mon Nov 9 Felix Bellaby <felix@pooh.u-net.com>
	* splash.h: splash screen pseudo-widget.
	* splash.c: splash screen pseudo-widget.
	* splash.png: splash image { will spell "Aisleriot" with casino chips }
	* sol.c: added session management and splash screen.
	* klondike.scm: fixed bug in scoring.
	* Makefile.am: updated for splash screen.
	* TODO: updated.

Wed Nov 3 Felix Bellaby <felix@pooh.u-net.com>
	* cscmi.c: (set_lambda) avoid guile limit on number of arguments.
	* event.c: (button_release) check for end of game on button click.
	do not unref card images.
	* *.scm: made compatible with tighter scheme of guile-1.3 
	* eagle_wing.scm: fixed bugs in drops on foundation slots.

Mon Nov 02 Felix Bellaby <felix@pooh.u-net.com>
	* dialog.c: added options dialogs for games.
	* cscmi.h: added lambdas to pass options back and forth 
	* cscmi.c: added lambdas to pass options back and forth 
	* sol.h: added options dialog
	* sol.c: added options dialog
	* menu.c: reverted to "Variaation" menu.
	* events.c: eliminated unused arguments from scm functions.
	* *.scm: eliminated unused arguments from scm functions.
	* klondike.scm: added "Three card deals" option.
	
Sat Oct 31 Felix Bellaby <felix@pooh.u-net.com>
	* scheme_messages: added names of new games {for i18n}
	* sol.c: (game_file_to_game_name) converts "-" to " ".
	* sol.c: (game_file_to_help_entry) converts "_" to "-" {for DocBook}
	* press_data.h: press_data redesigned for efficiency
	* slot.h: hslot_type redesigned for efficiency
	* press_data.c: updated for new press_data / hslot_type
	* slot.c: updated for new press_data / hslot_type, fixed bugs in
	expanding slots
	* event.c: updated for new press_data / hslot_type,
	tidied handling of button events.
	* draw.c: updated for new press_data / hslot_type.
	* cscm.c: updated for new press_data / hslot_type.
	
Thu Oct 29 Felix Bellaby <felix@pooh.u-net.com>
	* event.c: (drop_moving_cards) fixed bug in expanding slots.
	(button_press_event) delay decision on what event means so that clicks
	can be recognised on any slot.
	(motion_notify_event) now initiates drag as well.
	(button_up_not_moved) removed.
	(button_release_event) incorporates button_up_not_moved function.
	* slot.c: (slot_pressed) speeded up detection on long slots.
	* press_data.c: (generate_press_data) fixed bugs in expanding slots.
	* press_data.h: generate_press_data prototype changed.
	* fortunes.scm: corrected requested board size.
	* klondike.scm: replaced hint support to avoid crashes,
	changed double clicks to single clicks, reintroduced expanding slot. 

Thu Oct 29 Felix Bellaby <felix@pooh.u-net.com>
	* sol.c: (new_game) game_over set to false.
	* sol.h: game_over and game_won globals added.
	* menu.c: menu structure changed.
	(game_hint_callback) moved to dialog.c
	* menu.h: tidied the contents.
	* dialog.c: (show_select_game_dialog) allows rules to be set as well.
	(show_hint_dialog)  use g_string / gnome_app_message
	(show_game_over_dialog) use gnome_message_box
	* dialog.h: tidied the contents.
	* event.c: prevent card moves when game over
	
Tue Oct 27 Felix Bellaby <felix@pooh.u-net.com>
	* sol.c: (new_game) relocates new game creation into one place, 
	updates help menu to reflect any change in game rules.
	(game_file_to_help_entry) converts a game file to a help entry. 
	* sol.h: new_game added.
	* menu.c: game change callbacks replaced with calls to new_game.
	* menu.h: random_seed added.
	* dialog.c: updated to use new_game via random_seed.
	
1998-10-27  Jens Lautenbacher  <jens@tellux.de>

	* menu.c (toolbar): GNOME_STOCK_PIXMAP_EXIT instead of
 	GNOME_STOCK_MENU_EXIT

Mon Oct 26 Felix Bellaby <felix@pooh.u-net.com>
	* Makefile.am: added docs subdirectory.
	* card.c: updated API calls to libgdkcardimage
	* card.c (free_pixmaps): tidies up X server storage.
	* card.h: added free_pixmaps.
	* sol.c (main_prog): calls free_pixmaps before exiting. 
	* menu.c (help_menu): added gnome help.
	
1998-10-26    <jrb@redhat.com>

	* spider.scm ((deal-initial-setup)): reset the flip counter to allow one to play multiple games

1998-10-25  Rosanna Yuen  <rwsy@mit.edu>

	* yukon.scm (button-double-clicked): fixed double-clicking bug

1998-10-24  Rosanna Yuen  <rwsy@mit.edu>

	* doublets.scm: added a new game
	* sol.scm: moved flip-cards-back here.  generic move waste back to
	stock provided that stock is at 0 and waste is at 1.
	* menu.c: added another type of hint response for use in doublets.scm
	
1998-10-23  Rosanna Yuen  <rwsy@mit.edu>

	* eagle_wing.scm (get-hint): added hint support (and use it to do
	game-over)

1998-10-23  Rosanna Yuen  <rwsy@mit.edu>

	* eagle_wing.scm (button-double-clicked): added double click support

1998-10-21  Rosanna Yuen  <rwsy@mit.edu>

	* yukon.scm : added a new game 

1998-10-21  Rosanna Yuen  <rwsy@mit.edu>

	* eagle_wing.scm : added a new game

1998-10-20  Rosanna Yuen  <rwsy@mit.edu>

	* menu.c (game_hint_callback): added another type of hint response
	in the  format of "Move the " + card name + " " + "off the board"
	* fortunes.c (get-hint): added hint support
	
1998-10-20  Rosanna Yuen  <rwsy@mit.edu>

	* osmosis.scm (button-double-clicked): added double-click support

1998-10-19  Rosanna Yuen  <rwsy@mit.edu>

	* clock.scm (get-hint): added hint support. 

1998-10-19  Rosanna Yuen  <rwsy@mit.edu>

	* klondike.scm : added hint support.

1998-10-17  Rosanna Yuen  <rwsy@mit.edu>

	* canfield.scm: added hint support.

1998-10-16  Rosanna Yuen  <rwsy@mit.edu>

	* odessa.scm: completed scoring.  now it scores placing in
	foundations correctly.  also counts points that accrue when
	dealing.
	
1998-10-16    <jrb@redhat.com>

	* menu.c (file_new_game_callback): resets the timer.
	(restart_callback): resets the timer.
	* dialog.c (select_game_callback): resets the timer.

1998-10-16  Rosanna Yuen  <rwsy@mit.edu>
	
	* klondike.scm (complete-transaction): added scoring functionality

1998-10-16  Rosanna Yuen  <rwsy@mit.edu>

	* canfield.scm: added a new game	

1998-10-15  Rosanna Yuen  <rwsy@mit.edu>

	* fortunes.scm: added a new game

Wed Sep 23 Felix Bellaby <felix@pooh.u-net.com>
	* scheme_messages: new file of gettext msgids for *.scm filenames
	* sol.c: (main_prog) scans dir for installed games
	(start_timer) (stop_timer) C level control over timer.
	(timer_cb) updates time display, executes any scheme callback and 
	checks for end of game.
 	(create_press_data) minor fix for show card
	* menu.c: (create_menus) lists games found in dir with i18n.
	(file_new_game_callback) starts timer.
	* event.c: (end_of_game_test) stops timer.
	* cscmi.c: (scm_get_timeout) (scm_set_timeout) Scheme level control
	of when scheme timer callback will be invoked.
	(scm_set_lambda) used to set scheme timer callback function.
	(cscm_init) relocates scheme stuff from sol.c
	* TODO ticked off scan dir, timer.
	
Wed Sep 23 Felix Bellaby <felix@pooh.u-net.com>
	* sol.c: (create_press_data) relocated press_data creation.
	* press_data.c: removed press_data window creation.
	* event.c (button_press_event) starts show card with right button
	(button_release_event) undoes show card
	* draw.c (stop_show_card) removed as unused. 
	* draw.h (stop_show_card) removed as unused.
	* TODO ticked off show card.
	* gnome-aisleriot.png an icon for aisleriot.
	* Makefile.am added icon image.
	* sol.desktop added icon image.
	
Fri Sep 18 Felix Bellaby <felix@pooh.u-net.com>
	* sol.c: (game_file_to_name) i18n game file name converter.
	(main_prog) added status bar, removed redundant vbox and hbox.
	(make_title) replace hyphens with parentheses.
	(create_main_window) auto shrink disabled.
	* sol.h: game_file_to_name made available. 
	* menu.c: (game_load_game_callback) i18n used on game filenames, 
	board size now dictated by game.
	* klondike.scm: (new_game) return size of board.
	* camelot.scm: (new_game) return size of board.
	* odessa.scm: (new_game) return size of board.
	* osmosis.scm: (new_game) return size of board.
	* spider.scm: (new_game) return size of board.
	* freecell.scm: (new_game) return size of board.
	* event.c (configure_event) do nothing unless size has changed.
	
Wed Sep  9 Felix Bellaby <felix@pooh.u-net.com>
	* draw.c: substantially rewritten to use a single pixmap - surface -
	for double buffering and rationalise the drawing code.
	* draw.h: redundant function prototypes removed.
	* sol.c: removed creation of blank_surface pixmap, added a - draw_gc -
	so that a tiled fill could be used to paint the background.
	* sol.h: new gc made available. 
	* card.c: removed a commented out line.
	* events.c: removed use of snapshot pixmap.
	
Tue Sep  8 Felix Bellaby <felix@pooh.u-net.com>
	* draw.c: (draw_slot_placements) Whoops! fixed fix to slots!
	* card.c: (load_pixmaps) Improved mask loading.
	
Tue Sep  8 Felix Bellaby <felix@pooh.u-net.com>
	* draw.c: (draw_slot_placements) removed masking from slots images.
	(draw_normal_slot) (draw_expanding_slot) removed redundancy.
	
Mon Sep  7 Felix Bellaby <felix@pooh.u-net.com>
	* odessa.scm: fixed game over check, prevented cheap point scoring.
	* camelot.scm: fixed minor bug in add_mode, added hints.
	* osmosis.scm: fixed bug in flip counter, added hints.
	
Mon Sep  7 Felix Bellaby <felix@pooh.u-net.com>
	* events.c (drop_moving_cards): new drop test checks dragged card is
	above slot rather than checking mouse is above slot, dropped cards 
	now snap into place before the tedious screen refresh.
	* press_data.c: fixed the mask for moving cards. Horizontal slots 
	will also work if we start using them.
	
Mon Sep  7 Felix Bellaby <felix@pooh.u-net.com>
	* card.c: reimplemented card pixmaps using libgdkcardimage.so
	* Baize.xpm: A new background for the card table.
	* Makefile.am: added library dependency and Baize.xpm installation.
	
Sat Sep  5 Felix Bellaby <felix@pooh.u-net.com>
	* pixmaps/splash2.jpg:  AN Other ugly splash screen.

Fri Sep  4 12:06:55 1998 <jrb@redhat.com>
	* pixmaps/splash.{png,xcf}:  Added a temporary (ugly) splash screen.

1998-08-27    <jrb@aware-of-vacuity.labs.redhat.com>

	* TODO: updated to reflect the current whims of the author.

Mon Aug 17 14:15:58 1998  Jonathan Blandford <jrb@redhat.com>
	* added toolbar, and preparing for a bigger change.
	
Tue Aug 11 01:30:54 1998  Jonathan Blandford <jrb@redhat.com>
	* press_data.c: added transparencies for moving cards
	* events.c, draw.c: changed the background handling to be much faster

1998-08-10  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* Makefile.am (SUBDIRS): Fixed to include the pixmaps subdirectory.

	* pixmaps/Makefile.am: Fixed Makefile.am.

1998-07-25  Nuno Ferreira  <nmrf@rnl.ist.utl.pt>

	* sol.desktop: Added Portuguese translation.

1998-06-25  Maciej Stachowiak  <maciej@localhost.localdomain>

	* sol.scm: Remove dependency on (ice-9 slib) module; it's not
	actually used, AFAIK and the game works fine without it.

	* sol.c (main_prog): Use (defined? 'provide), not (procedure?
	'provide) to test wether boot-9.scm has been loaded; uncomment the
	test, as it should now work with both Guile 1.2 and recent
	snapshots.

Fri May  1 06:03:57 1998  Jonathan Blandford  <jrb@mit.edu>
	* press_data.c (generate_press_data): removed masking for moving cards (added 4/24)
	This is because stacks are moved occaisionally...
	* klondike.scm: No longer seg_faults when double clicked.  Klondike now works fine
	again

1998-04-24  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* press_data.c (generate_press_data): Doh.  Logical or is not the
	same as bitwise or.  This is why the window attributes were not
	being set correctly.

	* press_data.c (generate_press_data): Set the window shape to the
	mask bitmap to drag cards with rounded corners.

	* card.c: Made it use imlib for loading pixmaps.

Mon Apr 20 20:32:06 1998  Jonathan Blandford  <jrb@mit.edu>	
	* klondike.scm: Now handles double clicks!!!
	* odessa.scm, camelot.scm: minor bug fixes
	* events.c: Double click support added
	* sol.c: removed printf statements
	
Wed Apr  1 10:46:17 1998  Jonathan Blandford  <jrb@mit.edu>
	* sol.c: Minor cosmetic changes...
	* events.c, press_data.[ch]: Made moving cards a lot faster.  Now use a GdkWidget for it.
	* *.xpm: renamed to allow inclusion in C files...
	* FIXME: updated... (:
	* pixmap/cards.h: allows easy inclusion of C files.
	* card.c: Now compiles in the cards.

Sat Mar 21 15:34:17 1998  Tom Tromey  <tromey@cygnus.com>

	* dialog.c: Use gnome_message_box_*, not gnome_messagebox_*.

1998-03-1  Jonathan Blandford <jrb@mit.edu>
	* sol.c: Removed changes to work with recent snapshots below.  They 
	seemed to cause stack-overflows with guile 1.2
	
Sun Mar  8 16:15:03 1998  Tom Tromey  <tromey@cygnus.com>

	* Makefile.am (INCLUDES): Added GNOME_INCLUDEDIR.

	* sol.c (main_prog): Use new gnome_init.

1998-03-07  Jonathan Blandford <jrb@mit.edu>
	* sol.c: Added support for loading a game by number
	* dialog.c: ditto
	* menu.c: ditto
	* events.c: ditto
	* freecell.scm: cosmetic changes
	* odessa.scm: now scores completely, and has hints (that mostly work)
	
1998-03-03  Jonathan Blandford <jrb@mit.edu>

	* sol.scm: 
	* menu.scm: added hint support
	* camelot.scm: New game file.
	* dialog.scm: added dialog support

1998-02-25  Raja R Harinath  <harinath@cs.umn.edu>

	* sol.c (main_prog): Work with recent `guile' snapshots.

Tue Feb 24 22:21:29 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* menu.c: Added about box.  24-bpp display. 

1998-02-24  Carsten Schaar  <nhadcasc@fs-maphy.uni-hannover.de>

	* Makefile.am (sol_LDADD): Added '$(INTLLIBS)'

1998-02-19  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* sol.c (main_prog): Added app_id "aisleriot".

Sun Feb 15 05:51:02 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* freecell.scm: New game file.
	* menu.c: Added freecell to menu.
	* Makefile.am: Added freecell.scm.

Fri Feb 13 13:04:27 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* sol.c (main_prog): Use eval_installed_file() to load the rules
	file.
	(game_load_game_callback): Likewise.
	
	* cards.c (load_file_to_pixmap): Load pixmap files from the
	installation directory.

	* Makefile.am: integrate into build process.

